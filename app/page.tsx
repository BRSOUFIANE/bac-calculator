"use client"

import React from "react"

import { useState, useEffect, useRef } from "react"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { Badge } from "@/components/ui/badge"
import { Progress } from "@/components/ui/progress"
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs"
import { Alert, AlertDescription } from "@/components/ui/alert"
import {
  Calculator,
  TrendingUp,
  Target,
  BookOpen,
  Award,
  AlertCircle,
  CheckCircle,
  Info,
  Sparkles,
  Trophy,
  Star,
  GraduationCap,
  Users,
  Brain,
  Clock,
  Download,
  FileText,
} from "lucide-react"
import { useToast } from "@/components/ui/use-toast"

// NEW â€“ PDF helper
import jsPDF from "jspdf"

interface Subject {
  name: string
  coefficient: number
  grade: number | null
}

interface GradeStatus {
  status: string
  badgeColor: "red" | "green" | "blue" | "yellow" | "purple" | "orange"
  textColor: string
}

interface PredictiveScenario {
  name: string
  gradeNeeded: number
}

interface UniversityRequirement {
  university: string
  major: string
  neededGrade: number
}

// ---------- Study-plan helper (dynamic) ----------
function getStudyPlan(avg: number) {
  if (avg >= 16) {
    return {
      level: "Ù…ØªÙ‚Ø¯Ù…",
      daily: [
        { slot: "Ø§Ù„ØµØ¨Ø§Ø­ (9-11)", text: "Ù…Ø±Ø§Ø¬Ø¹Ø© Ø®ÙÙŠÙØ© + ØªÙ…Ø§Ø±ÙŠÙ† Ù…ØªÙ‚Ø¯Ù…Ø©" },
        { slot: "Ø¨Ø¹Ø¯ Ø§Ù„Ø¸Ù‡Ø± (2-4)", text: "Ø­Ù„ Ù†Ù…Ø§Ø°Ø¬ Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ø³Ø§Ø¨Ù‚Ø©" },
        { slot: "Ø§Ù„Ù…Ø³Ø§Ø¡ (8-9)", text: "Ù‚Ø±Ø§Ø¡Ø© / Ø­ÙØ¸ Ø®ÙÙŠÙ" },
      ],
      weekly: ["Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¹Ø§Ù…Ø©", "ØªØ¯Ø±ÙŠØ¨Ø§Øª ØªØ·Ø¨ÙŠÙ‚ÙŠØ©", "Ø±Ø§Ø­Ø©"],
    }
  }
  if (avg >= 14) {
    return {
      level: "Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹",
      daily: [
        { slot: "Ø§Ù„ØµØ¨Ø§Ø­ (8-11)", text: "Ù…ÙˆØ§Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø¹Ø§Ù„ÙŠØ©" },
        { slot: "Ø¨Ø¹Ø¯ Ø§Ù„Ø¸Ù‡Ø± (3-5)", text: "ØªÙ„Ø®ÙŠØµ Ø§Ù„Ø¯Ø±ÙˆØ³ + Ø®Ø±Ø§Ø¦Ø· Ø°Ù‡Ù†ÙŠØ©" },
        { slot: "Ø§Ù„Ù…Ø³Ø§Ø¡ (7-9)", text: "Ù…Ø±Ø§Ø¬Ø¹Ø© Ø³Ø±ÙŠØ¹Ø©" },
      ],
      weekly: ["Ù…Ø±Ø§Ø¬Ø¹Ø©", "ØªØ·Ø¨ÙŠÙ‚", "Ø±Ø§Ø­Ø©"],
    }
  }
  if (avg >= 12) {
    return {
      level: "Ø¬ÙŠØ¯",
      daily: [
        { slot: "Ø§Ù„ØµØ¨Ø§Ø­ (8-12)", text: "Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¶Ø¹ÙŠÙØ©" },
        { slot: "Ø¨Ø¹Ø¯ Ø§Ù„Ø¸Ù‡Ø± (2-5)", text: "ØªÙ…Ø§Ø±ÙŠÙ† + ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø´Ø±Ø­" },
        { slot: "Ø§Ù„Ù…Ø³Ø§Ø¡ (7-9)", text: "ØªÙ„Ø®ÙŠØµ + Ø¨Ø·Ø§Ù‚Ø§Øª Ù…Ø±Ø§Ø¬Ø¹Ø©" },
      ],
      weekly: ["Ù…Ø±Ø§Ø¬Ø¹Ø© Ù…ÙƒØ«ÙØ©", "Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…ØµØºÙ‘Ø±Ø©", "Ø±Ø§Ø­Ø©"],
    }
  }
  return {
    level: "Ø¨Ø­Ø§Ø¬Ø© Ù„ØªØ­Ø³ÙŠÙ† ÙƒØ¨ÙŠØ±",
    daily: [
      { slot: "Ø§Ù„ØµØ¨Ø§Ø­ (8-12)", text: "Ù…ÙˆØ§Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø¹Ø§Ù„ÙŠØ© (ØªØ±ÙƒÙŠØ² ÙƒØ§Ù…Ù„)" },
      { slot: "Ø¨Ø¹Ø¯ Ø§Ù„Ø¸Ù‡Ø± (2-6)", text: "ØªÙ…Ø§Ø±ÙŠÙ† ÙˆØ­Ù„ÙˆÙ„ Ù…ÙØµÙ„Ø©" },
      { slot: "Ø§Ù„Ù…Ø³Ø§Ø¡ (7-10)", text: "Ø­ÙØ¸ / ØªÙƒØ±Ø§Ø± Ù…ØªØ¨Ø§Ø¹Ø¯" },
    ],
    weekly: ["Ù…Ø±Ø§Ø¬Ø¹Ø© Ù…ÙƒØ«ÙØ©", "Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ù…Ù„", "Ø±Ø§Ø­Ø© Ù†ØµÙ-ÙŠÙˆÙ…"],
  }
}

interface BacType {
  type: string
  branch: string
  track: string
}

interface UniversityRequirement {
  name: string
  minGrade: number
  category: string
  branch: string
}

// Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù…Ø¹Ø§Øª Ø¨Ø§Ù„Ø¹ØªØ¨Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù„Ù„Ø¬Ø§Ù…Ø¹Ø§Øª Ø§Ù„Ù…ØºØ±Ø¨ÙŠØ©
const universityRequirements: UniversityRequirement[] = [
  // Ø§Ù„Ø·Ø¨ ÙˆØ·Ø¨ Ø§Ù„Ø£Ø³Ù†Ø§Ù† ÙˆØ§Ù„ØµÙŠØ¯Ù„Ø©
  { name: "ÙƒÙ„ÙŠØ© Ø§Ù„Ø·Ø¨ ÙˆØ§Ù„ØµÙŠØ¯Ù„Ø© - Ø§Ù„Ø±Ø¨Ø§Ø·", minGrade: 18.5, category: "Ø·Ø¨ÙŠØ©", branch: "Ø¹Ù„Ù…ÙŠØ©" },
  { name: "ÙƒÙ„ÙŠØ© Ø§Ù„Ø·Ø¨ ÙˆØ§Ù„ØµÙŠØ¯Ù„Ø© - Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡", minGrade: 18.3, category: "Ø·Ø¨ÙŠØ©", branch: "Ø¹Ù„Ù…ÙŠØ©" },
  { name: "ÙƒÙ„ÙŠØ© Ø§Ù„Ø·Ø¨ ÙˆØ§Ù„ØµÙŠØ¯Ù„Ø© - ÙØ§Ø³", minGrade: 18.0, category: "Ø·Ø¨ÙŠØ©", branch: "Ø¹Ù„Ù…ÙŠØ©" },
  { name: "ÙƒÙ„ÙŠØ© Ø·Ø¨ Ø§Ù„Ø£Ø³Ù†Ø§Ù† - Ø§Ù„Ø±Ø¨Ø§Ø·", minGrade: 17.8, category: "Ø·Ø¨ÙŠØ©", branch: "Ø¹Ù„Ù…ÙŠØ©" },
  { name: "ÙƒÙ„ÙŠØ© Ø·Ø¨ Ø§Ù„Ø£Ø³Ù†Ø§Ù† - Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡", minGrade: 17.5, category: "Ø·Ø¨ÙŠØ©", branch: "Ø¹Ù„Ù…ÙŠØ©" },
  { name: "ÙƒÙ„ÙŠØ© Ø§Ù„ØµÙŠØ¯Ù„Ø© - Ø§Ù„Ø±Ø¨Ø§Ø·", minGrade: 16.8, category: "Ø·Ø¨ÙŠØ©", branch: "Ø¹Ù„Ù…ÙŠØ©" },

  // Ø§Ù„Ù…Ø¯Ø§Ø±Ø³ Ø§Ù„Ø¹Ù„ÙŠØ§ Ù„Ù„Ù‡Ù†Ø¯Ø³Ø©
  { name: "Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ù…Ø­Ù…Ø¯ÙŠØ© Ù„Ù„Ù…Ù‡Ù†Ø¯Ø³ÙŠÙ†", minGrade: 17.5, category: "Ù‡Ù†Ø¯Ø³ÙŠØ©", branch: "Ø¹Ù„Ù…ÙŠØ©" },
  { name: "Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„ÙˆØ·Ù†ÙŠØ© Ø§Ù„Ø¹Ù„ÙŠØ§ Ù„Ù„Ù…Ø¹Ù„ÙˆÙ…ÙŠØ§Øª ÙˆØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†Ø¸Ù…", minGrade: 17.2, category: "Ù‡Ù†Ø¯Ø³ÙŠØ©", branch: "Ø¹Ù„Ù…ÙŠØ©" },
  { name: "Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„ÙˆØ·Ù†ÙŠØ© Ø§Ù„Ø¹Ù„ÙŠØ§ Ù„Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡ ÙˆØ§Ù„Ù…ÙŠÙƒØ§Ù†ÙŠÙƒ", minGrade: 16.8, category: "Ù‡Ù†Ø¯Ø³ÙŠØ©", branch: "Ø¹Ù„Ù…ÙŠØ©" },
  { name: "Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„ÙˆØ·Ù†ÙŠØ© Ù„Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ÙŠØ© - Ø§Ù„Ø±Ø¨Ø§Ø·", minGrade: 16.5, category: "Ù‡Ù†Ø¯Ø³ÙŠØ©", branch: "Ø¹Ù„Ù…ÙŠØ©" },
  { name: "Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„ÙˆØ·Ù†ÙŠØ© Ù„Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ÙŠØ© - ÙØ§Ø³", minGrade: 16.2, category: "Ù‡Ù†Ø¯Ø³ÙŠØ©", branch: "Ø¹Ù„Ù…ÙŠØ©" },
  { name: "Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„ÙˆØ·Ù†ÙŠØ© Ù„Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ÙŠØ© - Ù…Ø±Ø§ÙƒØ´", minGrade: 16.0, category: "Ù‡Ù†Ø¯Ø³ÙŠØ©", branch: "Ø¹Ù„Ù…ÙŠØ©" },

  // Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠØ© ÙˆØ§Ù„ØªØ¬Ø§Ø±ÙŠØ©
  {
    name: "Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„ÙˆØ·Ù†ÙŠØ© Ù„Ù„ØªØ¬Ø§Ø±Ø© ÙˆØ§Ù„ØªØ³ÙŠÙŠØ± - Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡",
    minGrade: 16.5,
    category: "Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©",
    branch: "Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©",
  },
  { name: "Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø¹Ù„ÙŠØ§ Ù„Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ - Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡", minGrade: 15.8, category: "ØªÙ‚Ù†ÙŠØ©", branch: "Ø¹Ù„Ù…ÙŠØ©" },
  {
    name: "ÙƒÙ„ÙŠØ© Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠØ© ÙˆØ§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© ÙˆØ§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© - Ø§Ù„Ø±Ø¨Ø§Ø·",
    minGrade: 14.5,
    category: "Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©",
    branch: "Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©",
  },
  {
    name: "ÙƒÙ„ÙŠØ© Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠØ© ÙˆØ§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© ÙˆØ§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© - Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡",
    minGrade: 14.2,
    category: "Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©",
    branch: "Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©",
  },

  // Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
  { name: "ÙƒÙ„ÙŠØ© Ø§Ù„Ø¹Ù„ÙˆÙ… - Ø§Ù„Ø±Ø¨Ø§Ø·", minGrade: 15.5, category: "Ø¹Ù„Ù…ÙŠØ©", branch: "Ø¹Ù„Ù…ÙŠØ©" },
  { name: "ÙƒÙ„ÙŠØ© Ø§Ù„Ø¹Ù„ÙˆÙ… - Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡", minGrade: 15.2, category: "Ø¹Ù„Ù…ÙŠØ©", branch: "Ø¹Ù„Ù…ÙŠØ©" },
  { name: "ÙƒÙ„ÙŠØ© Ø§Ù„Ø¹Ù„ÙˆÙ… - ÙØ§Ø³", minGrade: 14.8, category: "Ø¹Ù„Ù…ÙŠØ©", branch: "Ø¹Ù„Ù…ÙŠØ©" },
  { name: "ÙƒÙ„ÙŠØ© Ø§Ù„Ø¹Ù„ÙˆÙ… ÙˆØ§Ù„ØªÙ‚Ù†ÙŠØ§Øª - Ø§Ù„Ø±Ø¨Ø§Ø·", minGrade: 14.5, category: "Ø¹Ù„Ù…ÙŠØ©", branch: "Ø¹Ù„Ù…ÙŠØ©" },

  // Ø§Ù„Ø¢Ø¯Ø§Ø¨ ÙˆØ§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ÙŠØ©
  { name: "ÙƒÙ„ÙŠØ© Ø§Ù„Ø¢Ø¯Ø§Ø¨ ÙˆØ§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ÙŠØ© - Ø§Ù„Ø±Ø¨Ø§Ø·", minGrade: 13.5, category: "Ø£Ø¯Ø¨ÙŠØ©", branch: "Ø£Ø¯Ø¨ÙŠØ©" },
  { name: "ÙƒÙ„ÙŠØ© Ø§Ù„Ø¢Ø¯Ø§Ø¨ ÙˆØ§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ÙŠØ© - Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡", minGrade: 13.2, category: "Ø£Ø¯Ø¨ÙŠØ©", branch: "Ø£Ø¯Ø¨ÙŠØ©" },
  { name: "ÙƒÙ„ÙŠØ© Ø§Ù„Ø¢Ø¯Ø§Ø¨ ÙˆØ§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ÙŠØ© - ÙØ§Ø³", minGrade: 12.8, category: "Ø£Ø¯Ø¨ÙŠØ©", branch: "Ø£Ø¯Ø¨ÙŠØ©" },

  // Ø§Ù„Ø­Ù‚ÙˆÙ‚
  { name: "ÙƒÙ„ÙŠØ© Ø§Ù„Ø­Ù‚ÙˆÙ‚ - Ø§Ù„Ø±Ø¨Ø§Ø·", minGrade: 13.8, category: "Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©", branch: "Ø£Ø¯Ø¨ÙŠØ©" },
  { name: "ÙƒÙ„ÙŠØ© Ø§Ù„Ø­Ù‚ÙˆÙ‚ - Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡", minGrade: 13.5, category: "Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©", branch: "Ø£Ø¯Ø¨ÙŠØ©" },
  { name: "ÙƒÙ„ÙŠØ© Ø§Ù„Ø­Ù‚ÙˆÙ‚ - ÙØ§Ø³", minGrade: 13.0, category: "Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©", branch: "Ø£Ø¯Ø¨ÙŠØ©" },

  // Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø£ØµÙŠÙ„
  { name: "Ø¯Ø§Ø± Ø§Ù„Ø­Ø¯ÙŠØ« Ø§Ù„Ø­Ø³Ù†ÙŠØ©", minGrade: 15.0, category: "Ø´Ø±Ø¹ÙŠØ©", branch: "Ø£ØµÙŠÙ„" },
  { name: "ÙƒÙ„ÙŠØ© Ø£ØµÙˆÙ„ Ø§Ù„Ø¯ÙŠÙ† - ØªØ·ÙˆØ§Ù†", minGrade: 14.5, category: "Ø´Ø±Ø¹ÙŠØ©", branch: "Ø£ØµÙŠÙ„" },
  { name: "ÙƒÙ„ÙŠØ© Ø§Ù„Ø´Ø±ÙŠØ¹Ø© - ÙØ§Ø³", minGrade: 14.0, category: "Ø´Ø±Ø¹ÙŠØ©", branch: "Ø£ØµÙŠÙ„" },
  { name: "ÙƒÙ„ÙŠØ© Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© - Ù…Ø±Ø§ÙƒØ´", minGrade: 13.5, category: "Ù„ØºÙˆÙŠØ©", branch: "Ø£ØµÙŠÙ„" },

  // Ø§Ù„ÙÙ†ÙˆÙ† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ÙŠØ©
  { name: "Ø§Ù„Ù…Ø¹Ù‡Ø¯ Ø§Ù„Ø¹Ø§Ù„ÙŠ Ù„Ù„ÙÙ†ÙˆÙ† Ø§Ù„Ø¬Ù…ÙŠÙ„Ø© - Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡", minGrade: 14.0, category: "ÙÙ†ÙŠØ©", branch: "ÙÙ†ÙŠØ©" },
  { name: "Ø§Ù„Ù…Ø¹Ù‡Ø¯ Ø§Ù„Ø¹Ø§Ù„ÙŠ Ù„Ù„ÙÙ†ÙˆÙ† Ø§Ù„Ø¬Ù…ÙŠÙ„Ø© - ØªØ·ÙˆØ§Ù†", minGrade: 13.5, category: "ÙÙ†ÙŠØ©", branch: "ÙÙ†ÙŠØ©" },

  // Ø§Ù„Ù…Ø¯Ø§Ø±Ø³ Ø§Ù„Ø¹Ù„ÙŠØ§ Ù„Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§
  { name: "Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø¹Ù„ÙŠØ§ Ù„Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ - Ø§Ù„Ø±Ø¨Ø§Ø·", minGrade: 15.0, category: "ØªÙ‚Ù†ÙŠØ©", branch: "ØªÙ‚Ù†ÙŠØ©" },
  { name: "Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø¹Ù„ÙŠØ§ Ù„Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ - Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡", minGrade: 14.8, category: "ØªÙ‚Ù†ÙŠØ©", branch: "ØªÙ‚Ù†ÙŠØ©" },
  { name: "Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø¹Ù„ÙŠØ§ Ù„Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ - ÙØ§Ø³", minGrade: 14.5, category: "ØªÙ‚Ù†ÙŠØ©", branch: "ØªÙ‚Ù†ÙŠØ©" },
]

// Ø¯Ø§Ù„Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ù†Ø³Ø¨ÙŠ
const getAdaptiveStudyPlan = (finalGrade: number) => {
  if (finalGrade >= 16) {
    return {
      level: "Ù…Ù…ØªØ§Ø² - Ø®Ø·Ø© Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªÙÙˆÙ‚",
      color: "from-green-500/20 to-emerald-500/20",
      borderColor: "border-green-400/30",
      daily: [
        { time: "Ø§Ù„ØµØ¨Ø§Ø­ (9:00-11:00)", activity: "Ù…Ø±Ø§Ø¬Ø¹Ø© Ø³Ø±ÙŠØ¹Ø© Ù„Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©", priority: "Ù…ØªÙˆØ³Ø·" },
        { time: "Ø¨Ø¹Ø¯ Ø§Ù„Ø¸Ù‡Ø± (14:00-16:00)", activity: "Ø­Ù„ Ù†Ù…Ø§Ø°Ø¬ Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©", priority: "Ø¹Ø§Ù„ÙŠ" },
        { time: "Ø§Ù„Ù…Ø³Ø§Ø¡ (19:00-20:00)", activity: "Ù‚Ø±Ø§Ø¡Ø© Ø¥Ø¶Ø§ÙÙŠØ© ÙˆØªÙˆØ³ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø±ÙØ©", priority: "Ù…Ù†Ø®ÙØ¶" },
      ],
      weekly: [
        { day: "Ø§Ù„Ø£Ø­Ø¯", focus: "Ù…Ø±Ø§Ø¬Ø¹Ø© Ø´Ø§Ù…Ù„Ø©", hours: "3 Ø³Ø§Ø¹Ø§Øª" },
        { day: "Ø§Ù„Ø§Ø«Ù†ÙŠÙ†", focus: "ØªÙ…Ø§Ø±ÙŠÙ† ØªØ·Ø¨ÙŠÙ‚ÙŠØ©", hours: "4 Ø³Ø§Ø¹Ø§Øª" },
        { day: "Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡", focus: "Ù†Ù…Ø§Ø°Ø¬ Ø§Ù…ØªØ­Ø§Ù†Ø§Øª", hours: "4 Ø³Ø§Ø¹Ø§Øª" },
        { day: "Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡", focus: "Ù…Ø±Ø§Ø¬Ø¹Ø© Ù†Ù‚Ø§Ø· Ø§Ù„Ø¶Ø¹Ù", hours: "3 Ø³Ø§Ø¹Ø§Øª" },
        { day: "Ø§Ù„Ø®Ù…ÙŠØ³", focus: "ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª", hours: "3 Ø³Ø§Ø¹Ø§Øª" },
        { day: "Ø§Ù„Ø¬Ù…Ø¹Ø©", focus: "Ø±Ø§Ø­Ø© ÙˆÙ…Ø±Ø§Ø¬Ø¹Ø© Ø®ÙÙŠÙØ©", hours: "2 Ø³Ø§Ø¹Ø©" },
        { day: "Ø§Ù„Ø³Ø¨Øª", focus: "Ø±Ø§Ø­Ø© ÙƒØ§Ù…Ù„Ø©", hours: "Ø±Ø§Ø­Ø©" },
      ],
      tips: [
        "Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆØ§Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ",
        "Ø±ÙƒØ² Ø¹Ù„Ù‰ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©",
        "Ø§Ù‡ØªÙ… Ø¨Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©",
        "Ø·ÙˆØ± Ù…Ù‡Ø§Ø±Ø§Øª Ø­Ù„ Ø§Ù„Ù…Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©",
      ],
    }
  } else if (finalGrade >= 14) {
    return {
      level: "Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹ - Ø®Ø·Ø© Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„ØªÙ…ÙŠØ²",
      color: "from-blue-500/20 to-cyan-500/20",
      borderColor: "border-blue-400/30",
      daily: [
        { time: "Ø§Ù„ØµØ¨Ø§Ø­ (8:00-11:00)", activity: "Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ù…ÙˆØ§Ø¯ Ø°Ø§Øª Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ø¹Ø§Ù„ÙŠØ©", priority: "Ø¹Ø§Ù„ÙŠ" },
        { time: "Ø¨Ø¹Ø¯ Ø§Ù„Ø¸Ù‡Ø± (14:00-17:00)", activity: "Ø­Ù„ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† ÙˆØ§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª", priority: "Ø¹Ø§Ù„ÙŠ" },
        { time: "Ø§Ù„Ù…Ø³Ø§Ø¡ (19:00-21:00)", activity: "Ù…Ø±Ø§Ø¬Ø¹Ø© Ù…Ø§ ØªÙ… Ø¯Ø±Ø§Ø³ØªÙ‡", priority: "Ù…ØªÙˆØ³Ø·" },
      ],
      weekly: [
        { day: "Ø§Ù„Ø£Ø­Ø¯", focus: "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª ÙˆØ§Ù„ÙÙŠØ²ÙŠØ§Ø¡", hours: "5 Ø³Ø§Ø¹Ø§Øª" },
        { day: "Ø§Ù„Ø§Ø«Ù†ÙŠÙ†", focus: "Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ©", hours: "4 Ø³Ø§Ø¹Ø§Øª" },
        { day: "Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡", focus: "Ø§Ù„Ù„ØºØ§Øª", hours: "4 Ø³Ø§Ø¹Ø§Øª" },
        { day: "Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡", focus: "Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø£Ø¯Ø¨ÙŠØ©", hours: "4 Ø³Ø§Ø¹Ø§Øª" },
        { day: "Ø§Ù„Ø®Ù…ÙŠØ³", focus: "Ù…Ø±Ø§Ø¬Ø¹Ø© Ø´Ø§Ù…Ù„Ø©", hours: "5 Ø³Ø§Ø¹Ø§Øª" },
        { day: "Ø§Ù„Ø¬Ù…Ø¹Ø©", focus: "Ù†Ù…Ø§Ø°Ø¬ Ø§Ù…ØªØ­Ø§Ù†Ø§Øª", hours: "3 Ø³Ø§Ø¹Ø§Øª" },
        { day: "Ø§Ù„Ø³Ø¨Øª", focus: "Ø±Ø§Ø­Ø© ÙˆÙ…Ø±Ø§Ø¬Ø¹Ø© Ø®ÙÙŠÙØ©", hours: "2 Ø³Ø§Ø¹Ø©" },
      ],
      tips: [
        "Ø±ÙƒØ² Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø°Ø§Øª Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ø¹Ø§Ù„ÙŠØ©",
        "Ø­Ù„ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†",
        "Ø§Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙŠ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„ØµØ¹Ø¨Ø©",
        "Ù†Ø¸Ù… ÙˆÙ‚ØªÙƒ Ø¨Ø¯Ù‚Ø©",
      ],
    }
  } else if (finalGrade >= 12) {
    return {
      level: "Ø¬ÙŠØ¯ - Ø®Ø·Ø© Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø³ØªÙ…Ø±",
      color: "from-yellow-500/20 to-orange-500/20",
      borderColor: "border-yellow-400/30",
      daily: [
        { time: "Ø§Ù„ØµØ¨Ø§Ø­ (7:30-11:30)", activity: "Ø¯Ø±Ø§Ø³Ø© Ù…ÙƒØ«ÙØ© Ù„Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¶Ø¹ÙŠÙØ©", priority: "Ø¹Ø§Ù„ÙŠ Ø¬Ø¯Ø§Ù‹" },
        { time: "Ø¨Ø¹Ø¯ Ø§Ù„Ø¸Ù‡Ø± (14:00-18:00)", activity: "Ø­Ù„ ØªÙ…Ø§Ø±ÙŠÙ† ÙˆØªØ·Ø¨ÙŠÙ‚Ø§Øª", priority: "Ø¹Ø§Ù„ÙŠ" },
        { time: "Ø§Ù„Ù…Ø³Ø§Ø¡ (19:00-21:30)", activity: "Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆÙ…Ø°Ø§ÙƒØ±Ø©", priority: "Ø¹Ø§Ù„ÙŠ" },
      ],
      weekly: [
        { day: "Ø§Ù„Ø£Ø­Ø¯", focus: "Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¹Ù„Ù…ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©", hours: "6 Ø³Ø§Ø¹Ø§Øª" },
        { day: "Ø§Ù„Ø§Ø«Ù†ÙŠÙ†", focus: "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø§Ù„Ù…ÙƒØ«ÙØ©", hours: "6 Ø³Ø§Ø¹Ø§Øª" },
        { day: "Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡", focus: "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡", hours: "6 Ø³Ø§Ø¹Ø§Øª" },
        { day: "Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡", focus: "Ø§Ù„Ù„ØºØ§Øª ÙˆØ§Ù„Ø£Ø¯Ø¨", hours: "5 Ø³Ø§Ø¹Ø§Øª" },
        { day: "Ø§Ù„Ø®Ù…ÙŠØ³", focus: "Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©", hours: "5 Ø³Ø§Ø¹Ø§Øª" },
        { day: "Ø§Ù„Ø¬Ù…Ø¹Ø©", focus: "Ù…Ø±Ø§Ø¬Ø¹Ø© Ø´Ø§Ù…Ù„Ø©", hours: "4 Ø³Ø§Ø¹Ø§Øª" },
        { day: "Ø§Ù„Ø³Ø¨Øª", focus: "Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©", hours: "3 Ø³Ø§Ø¹Ø§Øª" },
      ],
      tips: ["Ø±ÙƒØ² Ø¹Ù„Ù‰ Ù†Ù‚Ø§Ø· Ø§Ù„Ø¶Ø¹Ù", "Ø§Ø·Ù„Ø¨ Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¥Ø¶Ø§ÙÙŠØ©", "Ø²Ø¯ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø©", "Ø§Ø³ØªØ®Ø¯Ù… Ù…ØµØ§Ø¯Ø± Ù…ØªÙ†ÙˆØ¹Ø©"],
    }
  } else {
    return {
      level: "ÙŠØ­ØªØ§Ø¬ ØªØ­Ø³ÙŠÙ† - Ø®Ø·Ø© Ø§Ù„Ø¥Ù†Ù‚Ø§Ø° Ø§Ù„Ù…ÙƒØ«ÙØ©",
      color: "from-red-500/20 to-pink-500/20",
      borderColor: "border-red-400/30",
      daily: [
        { time: "Ø§Ù„ØµØ¨Ø§Ø­ (7:00-12:00)", activity: "Ø¯Ø±Ø§Ø³Ø© Ù…ÙƒØ«ÙØ© Ø¬Ø¯Ø§Ù‹ Ù„Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª", priority: "Ø­Ø±Ø¬" },
        { time: "Ø¨Ø¹Ø¯ Ø§Ù„Ø¸Ù‡Ø± (13:00-18:00)", activity: "ØªÙ…Ø§Ø±ÙŠÙ† ÙˆØ­Ù„ÙˆÙ„ Ù…ÙØµÙ„Ø©", priority: "Ø­Ø±Ø¬" },
        { time: "Ø§Ù„Ù…Ø³Ø§Ø¡ (19:00-22:00)", activity: "Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆØ­ÙØ¸", priority: "Ø¹Ø§Ù„ÙŠ Ø¬Ø¯Ø§Ù‹" },
      ],
      weekly: [
        { day: "Ø§Ù„Ø£Ø­Ø¯", focus: "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©", hours: "8 Ø³Ø§Ø¹Ø§Øª" },
        { day: "Ø§Ù„Ø§Ø«Ù†ÙŠÙ†", focus: "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©", hours: "8 Ø³Ø§Ø¹Ø§Øª" },
        { day: "Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡", focus: "Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡ ÙˆØ§Ù„Ø¹Ù„ÙˆÙ…", hours: "7 Ø³Ø§Ø¹Ø§Øª" },
        { day: "Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡", focus: "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", hours: "6 Ø³Ø§Ø¹Ø§Øª" },
        { day: "Ø§Ù„Ø®Ù…ÙŠØ³", focus: "Ø§Ù„Ù„ØºØ§Øª Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ©", hours: "6 Ø³Ø§Ø¹Ø§Øª" },
        { day: "Ø§Ù„Ø¬Ù…Ø¹Ø©", focus: "Ù…Ø±Ø§Ø¬Ø¹Ø© Ù…ÙƒØ«ÙØ©", hours: "7 Ø³Ø§Ø¹Ø§Øª" },
        { day: "Ø§Ù„Ø³Ø¨Øª", focus: "Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ÙˆØªÙ‚ÙŠÙŠÙ…", hours: "5 Ø³Ø§Ø¹Ø§Øª" },
      ],
      tips: ["Ø§Ø¨Ø¯Ø£ Ù…Ù† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª", "Ø§Ø·Ù„Ø¨ Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙˆØ±ÙŠØ©", "Ø§Ø¯Ø±Ø³ Ø¨Ø¬Ø¯ÙŠØ© Ù‚ØµÙˆÙ‰", "Ù„Ø§ ØªÙŠØ£Ø³ ÙˆØ§Ø³ØªÙ…Ø±"],
    }
  }
}

// Ø¯Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„ PDF
const downloadPDF = (finalGrade: number, subjects: Subject[], analysis: any) => {
  // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­ØªÙˆÙ‰ HTML Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©
  const printContent = `
<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø¨Ø§ÙƒØ§Ù„ÙˆØ±ÙŠØ§</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
    .header { text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 15px; margin-bottom: 30px; }
    .result-card { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); margin-bottom: 20px; }
    .grade-display { font-size: 48px; font-weight: bold; text-align: center; color: #667eea; margin: 20px 0; }
    .subjects-table { width: 100%; border-collapse: collapse; margin: 20px 0; }
    .subjects-table th, .subjects-table td { border: 1px solid #ddd; padding: 12px; text-align: center; }
    .subjects-table th { background: #667eea; color: white; }
    .status-badge { padding: 8px 16px; border-radius: 20px; font-weight: bold; display: inline-block; }
    .excellent { background: #10b981; color: white; }
    .very-good { background: #3b82f6; color: white; }
    .good { background: #8b5cf6; color: white; }
    .acceptable { background: #f59e0b; color: white; }
    .weak { background: #ef4444; color: white; }
    .footer { text-align: center; margin-top: 30px; color: #666; }
  </style>
</head>
<body>
  <div class="header">
    <h1>ğŸ“ Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø¨Ø§ÙƒØ§Ù„ÙˆØ±ÙŠØ§ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</h1>
    <p>ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„ ÙˆÙ…ÙØµÙ„</p>
  </div>
  
  <div class="result-card">
    <h2>ğŸ“Š Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</h2>
    <div class="grade-display">${finalGrade.toFixed(2)}</div>
    <div style="text-align: center;">
      <span class="status-badge ${finalGrade >= 16 ? "excellent" : finalGrade >= 14 ? "very-good" : finalGrade >= 12 ? "good" : finalGrade >= 10 ? "acceptable" : "weak"}">
        ${finalGrade >= 16 ? "Ù…Ù…ØªØ§Ø²" : finalGrade >= 14 ? "Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹" : finalGrade >= 12 ? "Ø¬ÙŠØ¯" : finalGrade >= 10 ? "Ù…Ù‚Ø¨ÙˆÙ„" : "Ø¶Ø¹ÙŠÙ"}
      </span>
    </div>
  </div>

  <div class="result-card">
    <h2>ğŸ“š ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ø¯</h2>
    <table class="subjects-table">
      <thead>
        <tr>
          <th>Ø§Ù„Ù…Ø§Ø¯Ø©</th>
          <th>Ø§Ù„Ø¯Ø±Ø¬Ø©</th>
          <th>Ø§Ù„Ù…Ø¹Ø§Ù…Ù„</th>
          <th>Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ø­ØµÙ„Ø©</th>
        </tr>
      </thead>
      <tbody>
        ${subjects
          .map(
            (subject) => `
          <tr>
            <td>${subject.name}</td>
            <td>${subject.grade}</td>
            <td>${subject.coefficient}</td>
            <td>${(subject.grade * subject.coefficient).toFixed(2)}</td>
          </tr>
        `,
          )
          .join("")}
      </tbody>
    </table>
  </div>

  <div class="result-card">
    <h2>ğŸ¯ Ø§Ù„ØªÙˆØµÙŠØ§Øª</h2>
    <ul>
      ${
        analysis?.weakSubjects?.length > 0
          ? `<li><strong>Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØªÙŠ ØªØ­ØªØ§Ø¬ ØªØ­Ø³ÙŠÙ†:</strong> ${analysis.weakSubjects.map((s: Subject) => s.name).join(", ")}</li>`
          : "<li>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ ÙÙŠ Ù…Ø³ØªÙˆÙ‰ Ø¬ÙŠØ¯</li>"
      }
      ${
        analysis?.strongSubjects?.length > 0
          ? `<li><strong>Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…ØªÙ…ÙŠØ²Ø©:</strong> ${analysis.strongSubjects.map((s: Subject) => s.name).join(", ")}</li>`
          : ""
      }
      <li><strong>Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¹Ø§Ù… Ù„Ù„Ù…ÙˆØ§Ø¯:</strong> ${analysis?.averageGrade?.toFixed(2) || "ØºÙŠØ± Ù…Ø­Ø³ÙˆØ¨"}</li>
    </ul>
  </div>

  <div class="footer">
    <p>ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© Ø­Ø§Ø³Ø¨Ø© Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¨Ø§ÙƒØ§Ù„ÙˆØ±ÙŠØ§ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</p>
    <p>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: ${new Date().toLocaleDateString("ar-SA")}</p>
  </div>
</body>
</html>
`

  // ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©
  const printWindow = window.open("", "_blank")
  if (printWindow) {
    printWindow.document.write(printContent)
    printWindow.document.close()
    printWindow.focus()
    setTimeout(() => {
      printWindow.print()
      printWindow.close()
    }, 250)
  }
}

export default function BacCalculator() {
  const [subjects, setSubjects] = useState<Subject[]>([
    { name: "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª", coefficient: 4, grade: null },
    { name: "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡", coefficient: 4, grade: null },
    { name: "Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ©", coefficient: 2, grade: null },
    { name: "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", coefficient: 3, grade: null },
    { name: "Ø§Ù„Ù„ØºØ© Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©", coefficient: 2, grade: null },
    { name: "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©", coefficient: 2, grade: null },
    { name: "Ø§Ù„ÙÙ„Ø³ÙØ©", coefficient: 2, grade: null },
    { name: "Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§", coefficient: 2, grade: null },
    { name: "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©", coefficient: 1, grade: null },
    { name: "Ø§Ù„Ø±ÙŠØ§Ø¶Ø©", coefficient: 1, grade: null },
  ])
  const [finalGrade, setFinalGrade] = useState<number | null>(null)
  const [isCalculating, setIsCalculating] = useState(false)
  const [predictiveScenarios, setPredictiveScenarios] = useState<PredictiveScenario[]>([])

  const studyPlan = React.useMemo(() => (finalGrade !== null ? getStudyPlan(finalGrade) : null), [finalGrade])

  const { toast } = useToast()

  const copyToClipboard = (text: string) => {
    navigator.clipboard.writeText(text)
    toast({
      title: "ØªÙ… Ø§Ù„Ù†Ø³Ø®!",
      description: "ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©.",
    })
  }

  const downloadPDFold = () => {
    if (finalGrade === null) return
    const doc = new jsPDF()
    doc.setFont("Helvetica", "bold")
    doc.text("Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø¨Ø§ÙƒØ§Ù„ÙˆØ±ÙŠØ§", 105, 20, { align: "center" })
    doc.setFontSize(12)
    doc.text(`Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: ${finalGrade.toFixed(2)}`, 20, 40)
    doc.text(`Ø§Ù„ØªÙ‚Ø¯ÙŠØ±: ${getGradeStatus(finalGrade).status}`, 20, 50)
    doc.text("ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ø¯:", 20, 65)
    subjects.forEach((s, i) => doc.text(`${i + 1}. ${s.name} â€“ ${s.grade}`, 25, 75 + i * 8))
    doc.save("bac-result.pdf")
  }

  const [bacType, setBacType] = useState<BacType>({ type: "", branch: "", track: "" })
  const [analysis, setAnalysis] = useState<any>(null)
  const [showResult, setShowResult] = useState(false)
  const [includePE, setIncludePE] = useState(true)
  const [simulatedGradeWeakImprovement, setSimulatedGradeWeakImprovement] = useState<number | null>(null)
  const [simulatedGradeWeakImprovement3, setSimulatedGradeWeakImprovement3] = useState<number | null>(null)
  const [selectedScenario, setSelectedScenario] = useState<string>("realistic")
  const resultsRef = useRef<HTMLDivElement>(null)

  const subjectsData = {
    // Ø¨Ø§Ùƒ Ø­Ø± - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³Ø§Ù„Ùƒ
    literature: {
      subjects: [
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",
        "Ø¢Ø¯Ø§Ø¨ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©",
      ],
      coefficients: [4, 1, 2, 4, 4, 3, 3, 1],
    },
    humanities: {
      subjects: [
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",
        "Ø¢Ø¯Ø§Ø¨ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©",
      ],
      coefficients: [4, 1, 2, 3, 3, 4, 4, 1],
    },
    agricultural_sciences: {
      subjects: [
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",
        "Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§",
        "Ø§Ù„ØªØ±Ø¬Ù…Ø©",
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
        "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡",
        "Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø£Ø±Ø¶",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ù†Ø¨Ø§ØªÙŠØ© ÙˆØ§Ù„Ø­ÙŠÙˆØ§Ù†ÙŠØ©",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©",
      ],
      coefficients: [2, 4, 2, 2, 2, 7, 5, 5, 2, 2, 5, 1],
    },
    physical_sciences: {
      subjects: [
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",
        "Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§",
        "Ø§Ù„ØªØ±Ø¬Ù…Ø©",
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
        "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡",
        "Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø£Ø±Ø¶",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©",
      ],
      coefficients: [2, 4, 2, 2, 2, 7, 7, 5, 2, 2, 1],
    },
    life_earth_sciences: {
      subjects: [
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",
        "Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§",
        "Ø§Ù„ØªØ±Ø¬Ù…Ø©",
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
        "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡",
        "Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø£Ø±Ø¶",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©",
      ],
      coefficients: [2, 4, 2, 2, 2, 7, 5, 7, 2, 2, 1],
    },
    mathematics_stream_a: {
      subjects: [
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",
        "Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§",
        "Ø§Ù„ØªØ±Ø¬Ù…Ø©",
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
        "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡",
        "Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø£Ø±Ø¶",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©",
      ],
      coefficients: [2, 4, 2, 2, 2, 9, 7, 3, 2, 2, 1],
    },
    mathematics_stream_b: {
      subjects: [
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",
        "Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§",
        "Ø§Ù„ØªØ±Ø¬Ù…Ø©",
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
        "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡",
        "Ø¹Ù„ÙˆÙ… Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©",
      ],
      coefficients: [2, 4, 2, 2, 2, 9, 7, 3, 2, 2, 1],
    },
    management_accounting: {
      subjects: [
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",
        "Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§",
        "Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†",
        "Ù…Ø¹Ù„ÙˆÙ…ÙŠØ§Øª Ø§Ù„ØªØ¯Ø¨ÙŠØ±",
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
        "Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø© ÙˆØ§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©",
        "Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ Ø§Ù„Ø¹Ø§Ù… ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¡",
        "Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ ÙˆØ§Ù„ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ Ù„Ù„Ù…Ù‚Ø§ÙˆÙ„Ø§Øª",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©",
      ],
      coefficients: [2, 3, 2, 2, 1, 1, 4, 6, 3, 6, 2, 2, 1],
    },
    economics: {
      subjects: [
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",
        "Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§",
        "Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†",
        "Ù…Ø¹Ù„ÙˆÙ…ÙŠØ§Øª Ø§Ù„ØªØ¯Ø¨ÙŠØ±",
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
        "Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø© ÙˆØ§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©",
        "Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ Ø§Ù„Ø¹Ø§Ù… ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¡",
        "Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ ÙˆØ§Ù„ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ Ù„Ù„Ù…Ù‚Ø§ÙˆÙ„Ø§Øª",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©",
      ],
      coefficients: [2, 3, 2, 3, 1, 1, 4, 4, 6, 3, 2, 2, 1],
    },
    mechanical_technologies: {
      subjects: [
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
        "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡",
        "Ø¹Ù„ÙˆÙ… Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©",
      ],
      coefficients: [2, 4, 2, 7, 5, 8, 2, 2, 1],
    },
    electrical_technologies: {
      subjects: [
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
        "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡",
        "Ø¹Ù„ÙˆÙ… Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©",
      ],
      coefficients: [2, 4, 2, 7, 5, 8, 2, 2, 1],
    },
    religious_sciences: {
      subjects: [
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª",
        "Ø¹Ù„ÙˆÙ… Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
        "Ø§Ù„ÙØ±Ø§Ø¦Ø¶ ÙˆØ§Ù„ØªÙˆÙ‚ÙŠØª",
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
        "Ø§Ù„ØªÙˆØ«ÙŠÙ‚",
        "Ø§Ù„Ø£Ø¯Ø¨",
        "Ø§Ù„ØªÙØ³ÙŠØ± ÙˆØ§Ù„Ø­Ø¯ÙŠØ«",
        "Ø§Ù„ÙÙ‚Ù‡ ÙˆØ§Ù„Ø£ØµÙˆÙ„",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©",
      ],
      coefficients: [3, 2, 2, 2, 1, 1, 4, 5, 5, 2, 2, 1],
    },
    arabic_language: {
      subjects: [
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª",
        "Ø§Ù„ØªÙˆØ«ÙŠÙ‚",
        "Ø¹Ù„ÙˆÙ… Ø§Ù„Ù„ØºØ©",
        "Ø§Ù„Ø£Ø¯Ø¨",
        "Ø§Ù„ØªÙØ³ÙŠØ± ÙˆØ§Ù„Ø­Ø¯ÙŠØ«",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©",
      ],
      coefficients: [1, 3, 3, 1, 4, 5, 4, 2, 2, 1],
    },
    applied_arts: {
      subjects: [
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
        "Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…ÙŠØ§Øª ÙˆØ§Ù„Ø§Ù†ÙÙˆØºØ±Ø§ÙÙŠØ§",
        "Ø§Ù„Ø«Ù‚Ø§ÙØ© Ø§Ù„ØªØ´ÙƒÙŠÙ„ÙŠØ© ÙˆØªØ§Ø±ÙŠØ® Ø§Ù„ÙÙ†",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "ÙÙ† ØªØµÙ…ÙŠÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ ÙˆØ§Ù„ÙˆØ³Ø§Ø¦Ø· Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©",
        "ÙÙ† ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ù†ØªÙˆØ¬",
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©",
      ],
      coefficients: [2, 4, 2, 2, 2, 2, 2, 2, 8, 5, 1],
    },
    // Ø¨Ø§Ùƒ Ù…ØªÙ…Ø¯Ø±Ø³ - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³Ø§Ù„Ùƒ
    literature_motamadris: {
      subjects: [
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø¥Ù…ØªØ­Ø§Ù† Ø§Ù„Ø¬Ù‡ÙˆÙŠ",
        "Ø¢Ø¯Ø§Ø¨ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
      ],
      coefficients: [0, 0, 0, 4, 4, 3, 3],
    },
    humanities_motamadris: {
      subjects: [
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø¥Ù…ØªØ­Ø§Ù† Ø§Ù„Ø¬Ù‡ÙˆÙŠ",
        "Ø¢Ø¯Ø§Ø¨ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
      ],
      coefficients: [0, 0, 0, 3, 3, 4, 4],
    },
    agricultural_sciences_motamadris: {
      subjects: [
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø¥Ù…ØªØ­Ø§Ù† Ø§Ù„Ø¬Ù‡ÙˆÙŠ",
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
        "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡",
        "Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø£Ø±Ø¶",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ù†Ø¨Ø§ØªÙŠØ© ÙˆØ§Ù„Ø­ÙŠÙˆØ§Ù†ÙŠØ©",
      ],
      coefficients: [0, 0, 0, 7, 5, 5, 2, 2, 5],
    },
    physical_sciences_motamadris: {
      subjects: [
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø¥Ù…ØªØ­Ø§Ù† Ø§Ù„Ø¬Ù‡ÙˆÙŠ",
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
        "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡",
        "Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø£Ø±Ø¶",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
      ],
      coefficients: [0, 0, 0, 7, 7, 5, 2, 2],
    },
    life_earth_sciences_motamadris: {
      subjects: [
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø¥Ù…ØªØ­Ø§Ù† Ø§Ù„Ø¬Ù‡ÙˆÙŠ",
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
        "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡",
        "Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø£Ø±Ø¶",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
      ],
      coefficients: [0, 0, 0, 7, 5, 7, 2, 2],
    },
    mathematics_stream_a_motamadris: {
      subjects: [
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø¥Ù…ØªØ­Ø§Ù† Ø§Ù„Ø¬Ù‡ÙˆÙŠ",
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
        "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡",
        "Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø£Ø±Ø¶",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
      ],
      coefficients: [0, 0, 0, 9, 7, 3, 2, 2],
    },
    mathematics_stream_b_motamadris: {
      subjects: [
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø¥Ù…ØªØ­Ø§Ù† Ø§Ù„Ø¬Ù‡ÙˆÙŠ",
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
        "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡",
        "Ø¹Ù„ÙˆÙ… Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
      ],
      coefficients: [0, 0, 0, 9, 7, 3, 2, 2],
    },
    management_accounting_motamadris: {
      subjects: [
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø¥Ù…ØªØ­Ø§Ù† Ø§Ù„Ø¬Ù‡ÙˆÙŠ",
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
        "Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø© ÙˆØ§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©",
        "Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ Ø§Ù„Ø¹Ø§Ù… ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¡",
        "Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ ÙˆØ§Ù„ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ Ù„Ù„Ù…Ù‚Ø§ÙˆÙ„Ø§Øª",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
      ],
      coefficients: [0, 0, 0, 4, 6, 3, 6, 2, 2],
    },
    economics_motamadris: {
      subjects: [
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø¥Ù…ØªØ­Ø§Ù† Ø§Ù„Ø¬Ù‡ÙˆÙŠ",
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
        "Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø© ÙˆØ§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©",
        "Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ Ø§Ù„Ø¹Ø§Ù… ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¡",
        "Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ ÙˆØ§Ù„ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ Ù„Ù„Ù…Ù‚Ø§ÙˆÙ„Ø§Øª",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
      ],
      coefficients: [0, 0, 0, 4, 4, 6, 3, 2, 2],
    },
    mechanical_technologies_motamadris: {
      subjects: [
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø¥Ù…ØªØ­Ø§Ù† Ø§Ù„Ø¬Ù‡ÙˆÙŠ",
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
        "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡",
        "Ø¹Ù„ÙˆÙ… Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
      ],
      coefficients: [0, 0, 0, 7, 5, 8, 2, 2],
    },
    electrical_technologies_motamadris: {
      subjects: [
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø¥Ù…ØªØ­Ø§Ù† Ø§Ù„Ø¬Ù‡ÙˆÙŠ",
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
        "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡",
        "Ø¹Ù„ÙˆÙ… Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
      ],
      coefficients: [0, 0, 0, 7, 5, 8, 2, 2],
    },
    religious_sciences_motamadris: {
      subjects: [
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø¥Ù…ØªØ­Ø§Ù† Ø§Ù„Ø¬Ù‡ÙˆÙŠ",
        "Ø§Ù„Ø£Ø¯Ø¨",
        "Ø§Ù„ØªÙØ³ÙŠØ± ÙˆØ§Ù„Ø­Ø¯ÙŠØ«",
        "Ø§Ù„ÙÙ‚Ù‡ ÙˆØ§Ù„Ø£ØµÙˆÙ„",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
      ],
      coefficients: [0, 0, 0, 4, 5, 5, 2, 2],
    },
    arabic_language_motamadris: {
      subjects: [
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø¥Ù…ØªØ­Ø§Ù† Ø§Ù„Ø¬Ù‡ÙˆÙŠ",
        "Ø¹Ù„ÙˆÙ… Ø§Ù„Ù„ØºØ©",
        "Ø§Ù„Ø£Ø¯Ø¨",
        "Ø§Ù„ØªÙØ³ÙŠØ± ÙˆØ§Ù„Ø­Ø¯ÙŠØ«",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
      ],
      coefficients: [0, 0, 0, 4, 5, 4, 2, 2],
    },
    applied_arts_motamadris: {
      subjects: [
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰",
        "Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø¥Ù…ØªØ­Ø§Ù† Ø§Ù„Ø¬Ù‡ÙˆÙŠ",
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ø¬Ù†Ø¨ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",
        "Ø§Ù„ÙÙ„Ø³ÙØ©",
        "ÙÙ† ØªØµÙ…ÙŠÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ ÙˆØ§Ù„ÙˆØ³Ø§Ø¦Ø· Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©",
        "ÙÙ† ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ù†ØªÙˆØ¬",
      ],
      coefficients: [0, 0, 0, 2, 2, 8, 5],
    },
  }

  const branches = {
    motamadris: [
      { value: "artsAndHumanities_motamadris", label: "Ø´Ø¹Ø¨Ø© Ø§Ù„Ø¢Ø¯Ø§Ø¨ ÙˆØ§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ÙŠØ©" },
      { value: "experimentalSciences_motamadris", label: "Ø´Ø¹Ø¨Ø© Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©" },
      { value: "mathematicalSciences_motamadris", label: "Ø´Ø¹Ø¨Ø© Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ©" },
      { value: "genuineEducation_motamadris", label: "Ø´Ø¹Ø¨Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø£ØµÙŠÙ„" },
      { value: "economicAndManagementSciences_motamadris", label: "Ø´Ø¹Ø¨Ø© Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠØ© ÙˆØ§Ù„ØªØ¯Ø¨ÙŠØ±" },
      { value: "scienceAndTechnologies_motamadris", label: "Ø´Ø¹Ø¨Ø© Ø§Ù„Ø¹Ù„ÙˆÙ… ÙˆØ§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§Øª" },
      { value: "appliedArts_motamadris", label: "Ø´Ø¹Ø¨Ø© Ø§Ù„ÙÙ†ÙˆÙ† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ÙŠØ©" },
    ],
    literary: [
      { value: "artsAndHumanities", label: "Ø´Ø¹Ø¨Ø© Ø§Ù„Ø¢Ø¯Ø§Ø¨ ÙˆØ§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ÙŠØ©" },
      { value: "experimentalSciences", label: "Ø´Ø¹Ø¨Ø© Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©" },
      { value: "mathematicalSciences", label: "Ø´Ø¹Ø¨Ø© Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ©" },
      { value: "genuineEducation", label: "Ø´Ø¹Ø¨Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø£ØµÙŠÙ„" },
      { value: "economicAndManagementSciences", label: "Ø´Ø¹Ø¨Ø© Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠØ© ÙˆØ§Ù„ØªØ¯Ø¨ÙŠØ±" },
      { value: "scienceAndTechnologies", label: "Ø´Ø¹Ø¨Ø© Ø§Ù„Ø¹Ù„ÙˆÙ… ÙˆØ§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§Øª" },
      { value: "appliedArts", label: "Ø´Ø¹Ø¨Ø© Ø§Ù„ÙÙ†ÙˆÙ† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ÙŠØ©" },
    ],
  }

  const tracks = {
    artsAndHumanities: [
      { value: "literature", label: "Ù…Ø³Ù„Ùƒ Ø§Ù„Ø¢Ø¯Ø§Ø¨" },
      { value: "humanities", label: "Ù…Ø³Ù„Ùƒ Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ÙŠØ©" },
    ],
    experimentalSciences: [
      { value: "life_earth_sciences", label: "Ù…Ø³Ù„Ùƒ Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø£Ø±Ø¶" },
      { value: "physical_sciences", label: "Ù…Ø³Ù„Ùƒ Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¦ÙŠØ©" },
      { value: "agricultural_sciences", label: "Ù…Ø³Ù„Ùƒ Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠØ©" },
    ],
    mathematicalSciences: [
      { value: "mathematics_stream_a", label: 'Ù…Ø³Ù„Ùƒ Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© "Ø£"' },
      { value: "mathematics_stream_b", label: 'Ù…Ø³Ù„Ùƒ Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© "Ø¨"' },
    ],
    genuineEducation: [
      { value: "religious_sciences", label: "Ù…Ø³Ù„Ùƒ Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø´Ø±Ø¹ÙŠØ©" },
      { value: "arabic_language", label: "Ù…Ø³Ù„Ùƒ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©" },
    ],
    economicAndManagementSciences: [
      { value: "economics", label: "Ù…Ø³Ù„Ùƒ Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©" },
      { value: "management_accounting", label: "Ù…Ø³Ù„Ùƒ Ø¹Ù„ÙˆÙ… Ø§Ù„ØªØ¯Ø¨ÙŠØ± Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø§ØªÙŠ" },
    ],
    scienceAndTechnologies: [
      { value: "mechanical_technologies", label: "Ù…Ø³Ù„Ùƒ Ø¹Ù„ÙˆÙ… Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§Øª Ø§Ù„Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠØ©" },
      { value: "electrical_technologies", label: "Ù…Ø³Ù„Ùƒ Ø¹Ù„ÙˆÙ… Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§Øª Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©" },
    ],
    appliedArts: [{ value: "applied_arts", label: "Ù…Ø³Ù„Ùƒ Ø§Ù„ÙÙ†ÙˆÙ† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ÙŠØ©" }],
    // Ø¨Ø§Ùƒ Ù…ØªÙ…Ø¯Ø±Ø³
    artsAndHumanities_motamadris: [
      { value: "literature_motamadris", label: "Ù…Ø³Ù„Ùƒ Ø§Ù„Ø¢Ø¯Ø§Ø¨" },
      { value: "humanities_motamadris", label: "Ù…Ø³Ù„Ùƒ Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ÙŠØ©" },
    ],
    experimentalSciences_motamadris: [
      { value: "life_earth_sciences_motamadris", label: "Ù…Ø³Ù„Ùƒ Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø£Ø±Ø¶" },
      { value: "physical_sciences_motamadris", label: "Ù…Ø³Ù„Ùƒ Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¦ÙŠØ©" },
      { value: "agricultural_sciences_motamadris", label: "Ù…Ø³Ù„Ùƒ Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠØ©" },
    ],
    mathematicalSciences_motamadris: [
      { value: "mathematics_stream_a_motamadris", label: 'Ù…Ø³Ù„Ùƒ Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© "Ø£"' },
      { value: "mathematics_stream_b_motamadris", label: 'Ù…Ø³Ù„Ùƒ Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© "Ø¨"' },
    ],
    genuineEducation_motamadris: [
      { value: "religious_sciences_motamadris", label: "Ù…Ø³Ù„Ùƒ Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø´Ø±Ø¹ÙŠØ©" },
      { value: "arabic_language_motamadris", label: "Ù…Ø³Ù„Ùƒ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©" },
    ],
    economicAndManagementSciences_motamadris: [
      { value: "economics_motamadris", label: "Ù…Ø³Ù„Ùƒ Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©" },
      { value: "management_accounting_motamadris", label: "Ù…Ø³Ù„Ùƒ Ø¹Ù„ÙˆÙ… Ø§Ù„ØªØ¯Ø¨ÙŠØ± Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø§ØªÙŠ" },
    ],
    scienceAndTechnologies_motamadris: [
      { value: "mechanical_technologies_motamadris", label: "Ù…Ø³Ù„Ùƒ Ø¹Ù„ÙˆÙ… Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§Øª Ø§Ù„Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠØ©" },
      { value: "electrical_technologies_motamadris", label: "Ù…Ø³Ù„Ùƒ Ø¹Ù„ÙˆÙ… Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§Øª Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©" },
    ],
    appliedArts_motamadris: [{ value: "applied_arts_motamadris", label: "Ù…Ø³Ù„Ùƒ Ø§Ù„ÙÙ†ÙˆÙ† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ÙŠØ©" }],
  }

  useEffect(() => {
    if (bacType.track && subjectsData[bacType.track as keyof typeof subjectsData]) {
      const trackData = subjectsData[bacType.track as keyof typeof subjectsData]
      const newSubjects = trackData.subjects.map((subject, index) => ({
        name: subject,
        grade: 0,
        coefficient: trackData.coefficients[index],
      }))
      setSubjects(newSubjects)
      setFinalGrade(null)
      setShowResult(false)
      setAnalysis(null)
    }
  }, [bacType.track])

  const getGradeStatus = (grade: number) => {
    if (grade < 10) return { status: "Ø±Ø§Ø³Ø¨", color: "text-red-600", bgColor: "bg-red-100", icon: AlertCircle }
    if (grade >= 10 && grade < 12)
      return { status: "Ù…Ù‚Ø¨ÙˆÙ„", color: "text-yellow-600", bgColor: "bg-yellow-100", icon: CheckCircle }
    if (grade >= 12 && grade < 14) return { status: "Ø­Ø³Ù†", color: "text-blue-600", bgColor: "bg-blue-100", icon: Star }
    if (grade >= 14 && grade < 16)
      return { status: "Ø­Ø³Ù† Ø¬Ø¯Ø§Ù‹", color: "text-green-600", bgColor: "bg-green-100", icon: Award }
    return { status: "Ù…Ù…ØªØ§Ø²", color: "text-purple-600", bgColor: "bg-purple-100", icon: Trophy }
  }

  const calculateGrade = async () => {
    if (subjects.length === 0) return

    setIsCalculating(true)
    setShowResult(false)

    // ØªØ£Ø«ÙŠØ± Ø§Ù„ØªØ­Ù…ÙŠÙ„
    await new Promise((resolve) => setTimeout(resolve, 2000))

    let final = 0

    if (bacType.track.includes("motamadris")) {
      // Ø­Ø³Ø§Ø¨ Ø¨Ø§Ùƒ Ù…ØªÙ…Ø¯Ø±Ø³
      const continuousGrade1 = subjects[0]?.grade || 0
      const continuousGrade2 = subjects[1]?.grade || 0
      const regionalExam = subjects[2]?.grade || 0

      let nationalExamTotal = 0
      let totalCredits = 0

      for (let i = 3; i < subjects.length; i++) {
        const subject = subjects[i]
        if (subject.coefficient > 0) {
          nationalExamTotal += subject.grade * subject.coefficient
          totalCredits += subject.coefficient
        }
      }

      const nationalExamAverage = totalCredits > 0 ? nationalExamTotal / totalCredits : 0
      final = nationalExamAverage * 0.5 + regionalExam * 0.25 + ((continuousGrade1 + continuousGrade2) / 2) * 0.25
    } else {
      // Ø­Ø³Ø§Ø¨ Ø¨Ø§Ùƒ Ø­Ø±
      let totalPoints = 0
      let totalCredits = 0

      subjects.forEach((subject) => {
        // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ© ÙˆÙ„Ù… ÙŠØ¬ØªØ²Ù‡Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŒ ØªØ¬Ø§Ù‡Ù„Ù‡Ø§
        if (subject.name === "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©" && !includePE) {
          return
        }

        if (subject.coefficient > 0) {
          totalPoints += subject.grade * subject.coefficient
          totalCredits += subject.coefficient
        }
      })

      final = totalCredits > 0 ? totalPoints / totalCredits : 0
    }

    setFinalGrade(final)
    setIsCalculating(false)

    // ØªØ£Ø«ÙŠØ± Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†ØªÙŠØ¬Ø©
    setTimeout(() => {
      setShowResult(true)
      generateAnalysis(final)

      // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¥Ù„Ù‰ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ø¹ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¶Ø¹
      setTimeout(() => {
        if (resultsRef.current) {
          const elementTop = resultsRef.current.offsetTop
          const elementHeight = resultsRef.current.offsetHeight
          const windowHeight = window.innerHeight

          // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ÙˆØ¶Ø¹ Ù„Ø¬Ø¹Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ Ø§Ù„ÙˆØ³Ø·
          const scrollToPosition = elementTop - windowHeight / 2 + elementHeight / 4

          window.scrollTo({
            top: Math.max(0, scrollToPosition),
            behavior: "smooth",
          })
        }
      }, 100)
    }, 500)
  }

  const generatePredictiveScenarios = (
    currentSubjects: Subject[],
    currentBacType: BacType,
    currentIncludePE: boolean,
    currentGrade: number,
  ) => {
    const validSubjects = currentSubjects.filter(
      (s) => s.coefficient > 0 && (s.name !== "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©" || currentIncludePE),
    )
    const weakSubjects = validSubjects.filter((s) => s.grade < 12)
    const averageSubjects = validSubjects.filter((s) => s.grade >= 12 && s.grade < 16)
    const strongSubjects = validSubjects.filter((s) => s.grade >= 16)

    // Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ù…ØªØ­ÙØ¸: ØªØ­Ø³ÙŠÙ† Ø·ÙÙŠÙ
    const conservativeScenario = simulateScenario(
      currentSubjects,
      {
        weakImprovement: 1.5,
        averageImprovement: 0.5,
        strongImprovement: 0.2,
      },
      currentBacType,
      currentIncludePE,
    )

    // Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ ÙˆØ§Ù‚Ø¹ÙŠ: ØªØ­Ø³ÙŠÙ† Ù…ØªÙˆØ³Ø·
    const realisticScenario = simulateScenario(
      currentSubjects,
      {
        weakImprovement: 2.5,
        averageImprovement: 1.0,
        strongImprovement: 0.5,
      },
      currentBacType,
      currentIncludePE,
    )

    // Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ù…ØªÙØ§Ø¦Ù„: ØªØ­Ø³ÙŠÙ† ÙƒØ¨ÙŠØ±
    const optimisticScenario = simulateScenario(
      currentSubjects,
      {
        weakImprovement: 4.0,
        averageImprovement: 2.0,
        strongImprovement: 1.0,
      },
      currentBacType,
      currentIncludePE,
    )

    // Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ù…Ø«Ø§Ù„ÙŠ: Ø£Ù‚ØµÙ‰ ØªØ­Ø³ÙŠÙ† Ù…Ù…ÙƒÙ†
    const idealScenario = simulateScenario(
      currentSubjects,
      {
        weakImprovement: 6.0,
        averageImprovement: 3.0,
        strongImprovement: 1.5,
      },
      currentBacType,
      currentIncludePE,
    )

    // ØªØ­Ù„ÙŠÙ„ ØªØ£Ø«ÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ÙØ±Ø¯ÙŠØ©
    const subjectImpactAnalysis = validSubjects
      .map((subject) => {
        const impactFor1Point = calculateSubjectImpact(currentSubjects, subject, 1, currentBacType, currentIncludePE)
        const impactFor2Points = calculateSubjectImpact(currentSubjects, subject, 2, currentBacType, currentIncludePE)
        const impactFor3Points = calculateSubjectImpact(currentSubjects, subject, 3, currentBacType, currentIncludePE)

        return {
          subject: subject.name,
          coefficient: subject.coefficient,
          currentGrade: subject.grade,
          impactPer1Point: impactFor1Point - currentGrade,
          impactPer2Points: impactFor2Points - currentGrade,
          impactPer3Points: impactFor3Points - currentGrade,
          efficiency: (impactFor1Point - currentGrade) * subject.coefficient,
          priority: (subject.coefficient * (20 - subject.grade)) / 20,
        }
      })
      .sort((a, b) => b.efficiency - a.efficiency)

    // ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ø£Ù‡Ø¯Ø§Ù Ù…Ø­Ø¯Ø¯Ø©
    const timeAnalysis = {
      toReach14: calculateTimeToReach(currentGrade, 14, validSubjects),
      toReach16: calculateTimeToReach(currentGrade, 16, validSubjects),
      toReach18: calculateTimeToReach(currentGrade, 18, validSubjects),
    }

    return {
      conservative: {
        grade: conservativeScenario,
        improvement: conservativeScenario - currentGrade,
        probability: 85,
        timeframe: "Ø´Ù‡Ø± ÙˆØ§Ø­Ø¯",
        effort: "Ù…Ù†Ø®ÙØ¶",
        description: "ØªØ­Ø³ÙŠÙ† ØªØ¯Ø±ÙŠØ¬ÙŠ Ù…Ø¹ Ø¬Ù‡Ø¯ Ù…Ø¹ØªØ¯Ù„",
      },
      realistic: {
        grade: realisticScenario,
        improvement: realisticScenario - currentGrade,
        probability: 70,
        timeframe: "Ø´Ù‡Ø±ÙŠÙ†",
        effort: "Ù…ØªÙˆØ³Ø·",
        description: "ØªØ­Ø³ÙŠÙ† Ù…Ù„Ø­ÙˆØ¸ Ù…Ø¹ Ø¬Ù‡Ø¯ Ù…Ù†ØªØ¸Ù…",
      },
      optimistic: {
        grade: optimisticScenario,
        improvement: optimisticScenario - currentGrade,
        probability: 45,
        timeframe: "3 Ø£Ø´Ù‡Ø±",
        effort: "Ø¹Ø§Ù„ÙŠ",
        description: "ØªØ­Ø³ÙŠÙ† ÙƒØ¨ÙŠØ± Ù…Ø¹ Ø¬Ù‡Ø¯ Ù…ÙƒØ«Ù",
      },
      ideal: {
        grade: idealScenario,
        improvement: idealScenario - currentGrade,
        probability: 20,
        timeframe: "4-6 Ø£Ø´Ù‡Ø±",
        effort: "Ù…ÙƒØ«Ù Ø¬Ø¯Ø§Ù‹",
        description: "Ø£Ù‚ØµÙ‰ ØªØ­Ø³ÙŠÙ† Ù…Ù…ÙƒÙ† Ù…Ø¹ Ø¬Ù‡Ø¯ Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠ",
      },
      subjectImpact: subjectImpactAnalysis,
      timeAnalysis: timeAnalysis,
      currentStats: {
        weakSubjects: weakSubjects.length,
        averageSubjects: averageSubjects.length,
        strongSubjects: strongSubjects.length,
        totalSubjects: validSubjects.length,
      },
    }
  }

  const simulateScenario = (subjects: Subject[], improvements: any, bacType: BacType, includePE: boolean) => {
    const simulatedSubjects = subjects.map((s) => {
      let improvement = 0
      if (s.grade < 12) improvement = improvements.weakImprovement
      else if (s.grade < 16) improvement = improvements.averageImprovement
      else improvement = improvements.strongImprovement

      return { ...s, grade: Math.min(s.grade + improvement, 20) }
    })

    return calculateFinalGrade(simulatedSubjects, bacType, includePE)
  }

  const calculateSubjectImpact = (
    subjects: Subject[],
    targetSubject: Subject,
    improvement: number,
    bacType: BacType,
    includePE: boolean,
  ) => {
    const simulatedSubjects = subjects.map((s) =>
      s.name === targetSubject.name ? { ...s, grade: Math.min(s.grade + improvement, 20) } : s,
    )

    return calculateFinalGrade(simulatedSubjects, bacType, includePE)
  }

  const calculateFinalGrade = (subjects: Subject[], bacType: BacType, includePE: boolean) => {
    let final = 0

    if (bacType.track.includes("motamadris")) {
      const continuousGrade1 = subjects[0]?.grade || 0
      const continuousGrade2 = subjects[1]?.grade || 0
      const regionalExam = subjects[2]?.grade || 0

      let nationalExamTotal = 0
      let totalCredits = 0

      for (let i = 3; i < subjects.length; i++) {
        const subject = subjects[i]
        if (subject.coefficient > 0) {
          nationalExamTotal += subject.grade * subject.coefficient
          totalCredits += subject.coefficient
        }
      }

      const nationalExamAverage = totalCredits > 0 ? nationalExamTotal / totalCredits : 0
      final = nationalExamAverage * 0.5 + regionalExam * 0.25 + ((continuousGrade1 + continuousGrade2) / 2) * 0.25
    } else {
      let totalPoints = 0
      let totalCredits = 0

      subjects.forEach((subject) => {
        if (subject.name === "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©" && !includePE) {
          return
        }

        if (subject.coefficient > 0) {
          totalPoints += subject.grade * subject.coefficient
          totalCredits += subject.coefficient
        }
      })

      final = totalCredits > 0 ? totalPoints / totalCredits : 0
    }

    return final
  }

  const calculateTimeToReach = (currentGrade: number, targetGrade: number, subjects: Subject[]) => {
    if (currentGrade >= targetGrade) return "ØªÙ… ØªØ­Ù‚ÙŠÙ‚Ù‡ Ø¨Ø§Ù„ÙØ¹Ù„"

    const improvementNeeded = targetGrade - currentGrade
    const averageImprovementRate = 0.5 // Ù†Ù‚Ø·Ø© ÙˆØ§Ø­Ø¯Ø© ÙƒÙ„ Ø´Ù‡Ø±ÙŠÙ† ÙÙŠ Ø§Ù„Ù…ØªÙˆØ³Ø·
    const estimatedMonths = Math.ceil(improvementNeeded / averageImprovementRate)

    if (estimatedMonths <= 2) return "Ø´Ù‡Ø± Ø¥Ù„Ù‰ Ø´Ù‡Ø±ÙŠÙ†"
    if (estimatedMonths <= 4) return "2-4 Ø£Ø´Ù‡Ø±"
    if (estimatedMonths <= 6) return "4-6 Ø£Ø´Ù‡Ø±"
    return "Ø£ÙƒØ«Ø± Ù…Ù† 6 Ø£Ø´Ù‡Ø±"
  }

  // ØªØ­Ø¯ÙŠØ« Ø¯Ø§Ù„Ø© generateAnalysis Ù„ØªØ´Ù…Ù„ ØªØµÙÙŠØ© Ø§Ù„Ø¬Ø§Ù…Ø¹Ø§Øª ÙˆØ§Ù„Ø´Ø¹Ø¨Ø©
  const generateAnalysis = (grade: number) => {
    const validSubjects = subjects.filter((s) => s.coefficient > 0 && (s.name !== "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©" || includePE))
    const weakSubjects = validSubjects.filter((s) => s.grade < 10)
    const strongSubjects = validSubjects.filter((s) => s.grade >= 16)
    const averageGrade = validSubjects.reduce((sum, s) => sum + s.grade, 0) / validSubjects.length

    // ØªØ­Ø¯ÙŠØ¯ Ù†ÙˆØ¹ Ø§Ù„Ø´Ø¹Ø¨Ø© Ù„Ù„ØªØµÙÙŠØ©
    let branchType = "Ø¹Ù„Ù…ÙŠØ©"
    if (bacType.branch?.includes("artsAndHumanities")) branchType = "Ø£Ø¯Ø¨ÙŠØ©"
    else if (bacType.branch?.includes("economicAndManagement")) branchType = "Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©"
    else if (bacType.branch?.includes("genuineEducation")) branchType = "Ø£ØµÙŠÙ„"
    else if (bacType.branch?.includes("appliedArts")) branchType = "ÙÙ†ÙŠØ©"
    else if (bacType.branch?.includes("scienceAndTechnologies")) branchType = "ØªÙ‚Ù†ÙŠØ©"

    const eligibleUniversities = universityRequirements.filter(
      (u) => grade >= u.minGrade && (u.branch === branchType || u.branch === "Ø¹Ø§Ù…Ø©"),
    )
    const potentialUniversities = universityRequirements.filter(
      (u) => grade >= u.minGrade - 2 && grade < u.minGrade && (u.branch === branchType || u.branch === "Ø¹Ø§Ù…Ø©"),
    )

    // Calculate simulated grades for prediction
    const simulateGradeImprovement = (
      subjectsToImprove: Subject[],
      pointsToAdd: number,
      allSubjects: Subject[],
      bacType: BacType,
      includePE: boolean,
    ) => {
      const updatedSubjects = allSubjects.map((subject) => {
        if (subjectsToImprove.some((s) => s.name === subject.name)) {
          return { ...subject, grade: Math.min(20, subject.grade + pointsToAdd) }
        }
        return subject
      })
      return calculateFinalGrade(updatedSubjects, bacType, includePE)
    }

    // Calculate simulated grades for prediction
    const simulated2Points = simulateGradeImprovement(weakSubjects, 2, subjects, bacType, includePE)
    const simulated3Points = simulateGradeImprovement(weakSubjects, 3, subjects, bacType, includePE)
    setSimulatedGradeWeakImprovement(simulated2Points)
    setSimulatedGradeWeakImprovement3(simulated3Points)

    // Generate predictive scenarios
    const scenarios = generatePredictiveScenarios(subjects, bacType, includePE, grade)
    setPredictiveScenarios(scenarios)

    setAnalysis({
      weakSubjects,
      strongSubjects,
      averageGrade,
      eligibleUniversities,
      potentialUniversities,
      improvementNeeded: 16 - grade,
    })
  }

  const updateSubjectGrade = (index: number, grade: number) => {
    const newSubjects = [...subjects]
    newSubjects[index].grade = grade
    setSubjects(newSubjects)
  }

  // ØªØ­Ø³ÙŠÙ† ØªØµÙÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© (Ù„Ù… ØªØ¹Ø¯ Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙˆÙ„ÙƒÙ† ØªÙ… Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ù‡Ø§ Ù„Ø³Ù„Ø§Ù…Ø© Ø§Ù„ÙƒÙˆØ¯)
  const chartData = subjects
    .filter((s, index) => {
      if (bacType.track.includes("motamadris") && index < 3) {
        return false
      }
      if (s.name === "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©" && !includePE) {
        return false
      }
      return s.coefficient > 0
    })
    .map((subject) => ({
      name: subject.name.length > 15 ? subject.name.substring(0, 15) + "..." : subject.name,
      grade: subject.grade,
      coefficient: subject.coefficient,
      weightedGrade: subject.grade * subject.coefficient,
    }))

  const pieChartData = [
    {
      name: "Ù…Ù…ØªØ§Ø² (16-20)",
      value: subjects.filter(
        (s, index) =>
          !(bacType.track.includes("motamadris") && index < 3) &&
          s.grade >= 16 &&
          s.grade < 20 &&
          s.coefficient > 0 &&
          (s.name !== "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©" || includePE),
      ).length,
    },
    {
      name: "Ø­Ø³Ù† Ø¬Ø¯Ø§Ù‹ (14-16)",
      value: subjects.filter(
        (s, index) =>
          !(bacType.track.includes("motamadris") && index < 3) &&
          s.grade >= 14 &&
          s.grade < 16 &&
          s.coefficient > 0 &&
          (s.name !== "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©" || includePE),
      ).length,
    },
    {
      name: "Ø­Ø³Ù† (12-14)",
      value: subjects.filter(
        (s, index) =>
          !(bacType.track.includes("motamadris") && index < 3) &&
          s.grade >= 12 &&
          s.grade < 14 &&
          s.coefficient > 0 &&
          (s.name !== "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©" || includePE),
      ).length,
    },
    {
      name: "Ù…Ù‚Ø¨ÙˆÙ„ (10-12)",
      value: subjects.filter(
        (s, index) =>
          !(bacType.track.includes("motamadris") && index < 3) &&
          s.grade >= 10 &&
          s.grade < 12 &&
          s.coefficient > 0 &&
          (s.name !== "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©" || includePE),
      ).length,
    },
    {
      name: "Ø±Ø§Ø³Ø¨ (Ø£Ù‚Ù„ Ù…Ù† 10)",
      value: subjects.filter(
        (s, index) =>
          !(bacType.track.includes("motamadris") && index < 3) &&
          s.grade < 10 &&
          s.coefficient > 0 &&
          (s.name !== "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©" || includePE),
      ).length,
    },
  ].filter((item) => item.value > 0)

  const COLORS = ["#3B82F6", "#10B981", "#F59E0B", "#EF4444", "#8B5CF6", "#06B6D4", "#84CC16", "#F97316"]

  return (
    <div className="subtle-aurora-bg p-4 relative overflow-hidden" dir="rtl">
      {/* Subtle grid pattern */}
      <div className="grid-pattern-overlay"></div>

      {/* Floating particles */}
      <div className="floating-particles">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>

      <div className="max-w-7xl mx-auto space-y-8 relative z-10">
        {/* Header Ù…Ø­Ø³Ù† */}
        <div className="text-center space-y-6 mb-12 relative z-20">
          <div className="relative">
            <div className="absolute inset-0 flex items-center justify-center -z-10">
              <div className="w-40 h-40 bg-blue-500/20 rounded-full blur-3xl animate-enhanced-pulse"></div>
            </div>
            <div className="relative flex flex-col lg:flex-row items-center justify-center gap-6 z-10">
              <div className="p-4 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full shadow-2xl shadow-blue-500/30 animate-bounce hover-lift">
                <GraduationCap className="h-12 w-12 text-white" />
              </div>
              <h1 className="text-4xl lg:text-6xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent animate-gradient-x text-center lg:text-left px-4 py-2 bg-slate-900/50 rounded-2xl backdrop-blur-sm border border-white/10">
                Ø­Ø§Ø³Ø¨Ø© Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¨Ø§ÙƒØ§Ù„ÙˆØ±ÙŠØ§ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
              </h1>
              <div className="p-4 bg-gradient-to-r from-purple-600 to-pink-500 rounded-full shadow-2xl shadow-purple-500/30 animate-bounce animation-delay-200 hover-lift">
                <Sparkles className="h-12 w-12 text-white" />
              </div>
            </div>
          </div>
          <p className="text-gray-300 text-xl font-medium relative z-10 bg-slate-900/30 rounded-lg px-6 py-3 backdrop-blur-sm border border-white/10 inline-block">
            Ø§Ø­Ø³Ø¨ Ù…Ø¹Ø¯Ù„Ùƒ Ù…Ø¹ Ø§Ù„ØªØ­Ù„ÙŠÙ„ ÙˆØ§Ù„ØªÙ†Ø¨Ø¤Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ©
          </p>
          <div className="flex justify-center gap-3 relative z-10">
            <div className="w-3 h-3 bg-blue-400 rounded-full animate-bounce shadow-lg shadow-blue-400/50 glow-blue"></div>
            <div className="w-3 h-3 bg-purple-400 rounded-full animate-bounce animation-delay-200 shadow-lg shadow-purple-400/50 glow-purple"></div>
            <div className="w-3 h-3 bg-pink-400 rounded-full animate-bounce animation-delay-400 shadow-lg shadow-pink-400/50 glow-pink"></div>
          </div>
        </div>

        {/* Selection Cards Ù…Ø­Ø³Ù† */}
        <div className="grid md:grid-cols-3 gap-6">
          <Card className="border-0 bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl hover:from-white/20 hover:to-white/10 transition-all duration-500 hover:scale-105 hover:shadow-2xl hover:shadow-blue-500/20 group hover-lift">
            <CardHeader>
              <CardTitle className="flex items-center gap-3 text-white group-hover:text-blue-300 transition-colors duration-300">
                <div className="p-2 bg-blue-500/20 rounded-lg group-hover:bg-blue-500/30 transition-colors duration-300">
                  <BookOpen className="h-6 w-6 text-blue-400" />
                </div>
                Ù†ÙˆØ¹ Ø§Ù„Ø¨Ø§ÙƒØ§Ù„ÙˆØ±ÙŠØ§
              </CardTitle>
            </CardHeader>
            <CardContent>
              <Select
                value={bacType.type}
                onValueChange={(value) => setBacType({ ...bacType, type: value, branch: "", track: "" })}
              >
                <SelectTrigger className="bg-white/20 border-white/30 text-white hover:bg-white/30 transition-all duration-300 focus:ring-2 focus:ring-blue-400/50">
                  <SelectValue placeholder="Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø¨Ø§ÙƒØ§Ù„ÙˆØ±ÙŠØ§" />
                </SelectTrigger>
                <SelectContent className="z-50 bg-white/95 backdrop-blur-lg border-white/20 shadow-2xl select-content">
                  <SelectItem value="motamadris" className="hover:bg-blue-500/20 transition-colors">
                    Ø¨Ø§Ùƒ Ù…ØªÙ…Ø¯Ø±Ø³
                  </SelectItem>
                  <SelectItem value="literary" className="hover:bg-blue-500/20 transition-colors">
                    Ø¨Ø§Ùƒ Ø­Ø±
                  </SelectItem>
                </SelectContent>
              </Select>
            </CardContent>
          </Card>

          {bacType.type && (
            <Card className="border-0 bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl hover:from-white/20 hover:to-white/10 transition-all duration-500 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/20 group hover-lift animate-fade-in-scale">
              <CardHeader>
                <CardTitle className="flex items-center gap-3 text-white group-hover:text-purple-300 transition-colors duration-300">
                  <div className="p-2 bg-purple-500/20 rounded-lg group-hover:bg-purple-500/30 transition-colors duration-300">
                    <Users className="h-6 w-6 text-purple-400" />
                  </div>
                  Ø§Ù„Ø´Ø¹Ø¨Ø©
                </CardTitle>
              </CardHeader>
              <CardContent>
                <Select
                  value={bacType.branch}
                  onValueChange={(value) => setBacType({ ...bacType, branch: value, track: "" })}
                >
                  <SelectTrigger className="bg-white/20 border-white/30 text-white hover:bg-white/30 transition-all duration-300 focus:ring-2 focus:ring-purple-400/50">
                    <SelectValue placeholder="Ø§Ø®ØªØ± Ø§Ù„Ø´Ø¹Ø¨Ø©" />
                  </SelectTrigger>
                  <SelectContent className="z-50 bg-white/95 backdrop-blur-lg border-white/20 shadow-2xl select-content">
                    {branches[bacType.type as keyof typeof branches]?.map((branch) => (
                      <SelectItem
                        key={branch.value}
                        value={branch.value}
                        className="hover:bg-blue-500/20 transition-colors"
                      >
                        {branch.label}
                      </SelectItem>
                    ))}
                  </SelectContent>
                </Select>
              </CardContent>
            </Card>
          )}

          {bacType.branch && (
            <Card className="border-0 bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl hover:from-white/20 hover:to-white/10 transition-all duration-500 hover:scale-105 hover:shadow-2xl hover:shadow-pink-500/20 group hover-lift animate-fade-in-scale">
              <CardHeader>
                <CardTitle className="flex items-center gap-3 text-white group-hover:text-pink-300 transition-colors duration-300">
                  <div className="p-2 bg-pink-500/20 rounded-lg group-hover:bg-pink-500/30 transition-colors duration-300">
                    <Brain className="h-6 w-6 text-pink-400" />
                  </div>
                  Ø§Ù„Ù…Ø³Ù„Ùƒ
                </CardTitle>
              </CardHeader>
              <CardContent>
                <Select value={bacType.track} onValueChange={(value) => setBacType({ ...bacType, track: value })}>
                  <SelectTrigger className="bg-white/20 border-white/30 text-white hover:bg-white/30 transition-all duration-300 focus:ring-2 focus:ring-pink-400/50">
                    <SelectValue placeholder="Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³Ù„Ùƒ" />
                  </SelectTrigger>
                  <SelectContent className="z-50 bg-white/95 backdrop-blur-lg border-white/20 shadow-2xl select-content">
                    {tracks[bacType.branch as keyof typeof tracks]?.map((track) => (
                      <SelectItem
                        key={track.value}
                        value={track.value}
                        className="hover:bg-blue-500/20 transition-colors"
                      >
                        {track.label}
                      </SelectItem>
                    ))}
                  </SelectContent>
                </Select>
              </CardContent>
            </Card>
          )}
        </div>

        {/* Subjects Input Ù…Ø­Ø³Ù† */}
        {subjects.length > 0 && bacType.track && (
          <Card className="border-0 bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl hover-lift">
            <CardHeader>
              <CardTitle className="flex items-center gap-3 text-white text-2xl">
                <div className="p-2 bg-green-500/20 rounded-lg">
                  <Target className="h-7 w-7 text-green-400" />
                </div>
                Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¯Ø±Ø¬Ø§Øª
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                {subjects.map((subject, index) => (
                  <div key={index} className="space-y-3">
                    <Label className="text-white font-medium text-lg">{subject.name}</Label>
                    <div className="flex items-center gap-3">
                      <Input
                        type="number"
                        min="0"
                        max="20"
                        value={subject.grade || ""}
                        onChange={(e) => updateSubjectGrade(index, Number.parseFloat(e.target.value) || 0)}
                        disabled={
                          subject.name === "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©" && !bacType.track.includes("motamadris") && !includePE
                        }
                        className={`flex-1 bg-white/20 border-white/30 text-white placeholder:text-gray-300 text-lg transition-all duration-300 ${
                          subject.name === "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©" && !bacType.track.includes("motamadris") && !includePE
                            ? "opacity-50 cursor-not-allowed bg-gray-500/20"
                            : "hover:bg-white/30 focus:bg-white/30"
                        }`}
                        placeholder={
                          subject.name === "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©" && !bacType.track.includes("motamadris") && !includePE
                            ? "Ù…Ø¹Ø·Ù„"
                            : "0.00"
                        }
                      />
                      {subject.coefficient > 0 && (
                        <Badge variant="secondary" className="bg-blue-500/20 text-blue-300 border-blue-400/30">
                          Ù…Ø¹Ø§Ù…Ù„ {subject.coefficient}
                        </Badge>
                      )}
                    </div>

                    {/* Ø®ÙŠØ§Ø± Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ© Ù„Ù„Ø¨Ø§Ùƒ Ø§Ù„Ø­Ø± Ù…Ø­Ø³Ù† */}
                    {subject.name === "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©" && !bacType.track.includes("motamadris") && (
                      <div className="mt-3 p-4 bg-white/5 rounded-lg border border-white/20 hover:bg-white/10 transition-all duration-300">
                        <div className="flex items-center justify-between mb-3">
                          <Label className="text-white font-medium">Ù‡Ù„ Ø§Ø¬ØªØ²Øª Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©ØŸ</Label>
                          <div className="flex items-center gap-3">
                            <button
                              type="button"
                              onClick={() => setIncludePE(true)}
                              className={`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${
                                includePE
                                  ? "bg-green-500 text-white shadow-lg shadow-green-500/30 scale-105"
                                  : "bg-white/10 text-gray-300 hover:bg-white/20"
                              }`}
                            >
                              Ù†Ø¹Ù…
                            </button>
                            <button
                              type="button"
                              onClick={() => setIncludePE(false)}
                              className={`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${
                                !includePE
                                  ? "bg-red-500 text-white shadow-lg shadow-red-500/30 scale-105"
                                  : "bg-white/10 text-gray-300 hover:bg-white/20"
                              }`}
                            >
                              Ù„Ø§
                            </button>
                          </div>
                        </div>
                        {!includePE && (
                          <div className="text-yellow-300 text-sm flex items-center gap-2 animate-fade-in-up">
                            <AlertCircle className="h-4 w-4" />
                            Ø³ÙŠØªÙ… Ø§Ø³ØªØ¨Ø¹Ø§Ø¯ Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ© Ù…Ù† Ø§Ù„Ø­Ø³Ø§Ø¨
                          </div>
                        )}
                      </div>
                    )}
                  </div>
                ))}
              </div>

              <Button
                onClick={calculateGrade}
                disabled={isCalculating}
                className="w-full mt-8 h-16 text-xl font-bold bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 shadow-2xl hover:shadow-blue-500/30"
              >
                {isCalculating ? (
                  <div className="flex items-center gap-3">
                    <div className="w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
                    Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨...
                  </div>
                ) : (
                  <div className="flex items-center gap-3">
                    <Calculator className="h-6 w-6" />
                    Ø§Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¹Ø¯Ù„ ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„
                    <Sparkles className="h-6 w-6" />
                  </div>
                )}
              </Button>
            </CardContent>
          </Card>
        )}

        {/* Results Ù…Ø­Ø³Ù† */}
        {showResult && finalGrade !== null && (
          <div className="animate-fade-in-up" ref={resultsRef}>
            <Tabs defaultValue="result" className="space-y-6">
              {/* ØªØ­Ø¯ÙŠØ« TabsList Ù„ØªØ´Ù…Ù„ 6 ØªØ¨ÙˆÙŠØ¨Ø§Øª */}
              <TabsList className="grid w-full grid-cols-6 bg-white/10 backdrop-blur-lg border-0 p-1 rounded-xl">
                <TabsTrigger
                  value="result"
                  className="data-[state=active]:bg-white/20 text-white rounded-lg transition-all duration-300 hover:bg-white/10"
                >
                  Ø§Ù„Ù†ØªÙŠØ¬Ø©
                </TabsTrigger>
                <TabsTrigger
                  value="analysis"
                  className="data-[state=active]:bg-white/20 text-white rounded-lg transition-all duration-300 hover:bg-white/10"
                >
                  Ø§Ù„ØªØ­Ù„ÙŠÙ„
                </TabsTrigger>
                <TabsTrigger
                  value="prediction"
                  className="data-[state=active]:bg-white/20 text-white rounded-lg transition-all duration-300 hover:bg-white/10"
                >
                  Ø§Ù„ØªÙ†Ø¨Ø¤
                </TabsTrigger>
                <TabsTrigger
                  value="universities"
                  className="data-[state=active]:bg-white/20 text-white rounded-lg transition-all duration-300 hover:bg-white/10"
                >
                  Ø§Ù„Ø¬Ø§Ù…Ø¹Ø§Øª
                </TabsTrigger>
                <TabsTrigger
                  value="strategy"
                  className="data-[state=active]:bg-white/20 text-white rounded-lg transition-all duration-300 hover:bg-white/10"
                >
                  Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„Ø¯Ø±Ø§Ø³Ø©
                </TabsTrigger>
                <TabsTrigger
                  value="pdf"
                  className="data-[state=active]:bg-white/20 text-white rounded-lg transition-all duration-300 hover:bg-white/10"
                >
                  ğŸ“„ PDF
                </TabsTrigger>
              </TabsList>

              <TabsContent value="result">
                <div className="space-y-8">
                  {/* Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø§Ù„Ù…Ø­Ø³Ù†Ø© */}
                  <Card className="border-0 bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl hover-lift overflow-hidden relative">
                    {/* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø®Ù„ÙÙŠØ© */}
                    <div className="absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 animate-gradient-x"></div>
                    <div className="absolute top-0 right-0 w-32 h-32 bg-blue-500/20 rounded-full blur-3xl animate-pulse"></div>
                    <div className="absolute bottom-0 left-0 w-24 h-24 bg-purple-500/20 rounded-full blur-2xl animate-pulse animation-delay-2000"></div>

                    <CardHeader className="relative z-10">
                      <CardTitle className="flex items-center gap-3 text-white text-3xl justify-center">
                        <div className="p-3 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-xl shadow-2xl">
                          <Trophy className="h-8 w-8 text-white" />
                        </div>
                        ğŸ‰ Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ ğŸ‰
                      </CardTitle>
                    </CardHeader>

                    <CardContent className="text-center space-y-10 relative z-10">
                      {/* Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */}
                      <div className="relative">
                        <div className="absolute inset-0 bg-gradient-to-r from-blue-600/30 to-purple-600/30 rounded-3xl blur-xl"></div>
                        <div className="relative bg-gradient-to-r from-slate-800/80 to-slate-900/80 backdrop-blur-lg rounded-3xl p-8 border border-white/20 shadow-2xl">
                          <div className="text-9xl font-black bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent animate-enhanced-pulse drop-shadow-2xl">
                            {finalGrade.toFixed(2)}
                          </div>
                          <div className="text-2xl text-white/80 font-medium mt-2">Ù…Ù† 20</div>

                          {/* Ø§Ù„Ø²Ø®Ø§Ø±Ù Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© */}
                          <div className="absolute -top-4 -right-4 w-8 h-8 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full animate-bounce shadow-lg"></div>
                          <div className="absolute -bottom-4 -left-4 w-6 h-6 bg-gradient-to-r from-blue-400 to-cyan-400 rounded-full animate-bounce animation-delay-200 shadow-lg"></div>
                          <div className="absolute top-1/2 -left-6 w-4 h-4 bg-gradient-to-r from-pink-400 to-purple-400 rounded-full animate-bounce animation-delay-400 shadow-lg"></div>
                          <div className="absolute top-1/4 -right-6 w-5 h-5 bg-gradient-to-r from-green-400 to-teal-400 rounded-full animate-bounce animation-delay-400 shadow-lg"></div>
                        </div>
                      </div>

                      {/* Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ù…Ø­Ø³Ù† */}
                      <div className="relative">
                        <div className="absolute inset-0 bg-gradient-to-r from-green-500/20 to-blue-500/20 rounded-2xl blur-lg"></div>
                        <div
                          className={`relative inline-flex items-center gap-6 px-12 py-6 rounded-2xl ${getGradeStatus(finalGrade).bgColor} border-2 border-white/30 shadow-2xl hover:scale-105 transition-all duration-500 backdrop-blur-lg`}
                        >
                          {(() => {
                            const StatusIcon = getGradeStatus(finalGrade).icon
                            return (
                              <StatusIcon className={`h-12 w-12 ${getGradeStatus(finalGrade).color} drop-shadow-lg`} />
                            )
                          })()}
                          <div className="text-center">
                            <div className={`text-4xl font-black ${getGradeStatus(finalGrade).color} drop-shadow-lg`}>
                              {getGradeStatus(finalGrade).status}
                            </div>
                            <div className="text-lg text-white/80 font-medium mt-1">Ø§Ù„ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</div>
                          </div>
                          {(() => {
                            const StatusIcon = getGradeStatus(finalGrade).icon
                            return (
                              <StatusIcon className={`h-12 w-12 ${getGradeStatus(finalGrade).color} drop-shadow-lg`} />
                            )
                          })()}
                        </div>
                      </div>

                      {/* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ù…Ø­Ø³Ù† */}
                      <div className="space-y-6">
                        <div className="relative">
                          <div className="absolute inset-0 bg-gradient-to-r from-blue-500/20 to-purple-500/20 rounded-full blur-sm"></div>
                          <div className="relative bg-white/20 rounded-full h-8 overflow-hidden border border-white/30 shadow-inner">
                            <div
                              className="h-full bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 transition-all duration-2000 ease-out rounded-full relative overflow-hidden"
                              style={{ width: `${(finalGrade / 20) * 100}%` }}
                            >
                              <div className="absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-pulse"></div>
                            </div>
                          </div>
                        </div>

                        <div className="grid grid-cols-3 gap-6 text-center">
                          <div className="p-4 bg-gradient-to-br from-blue-500/20 to-cyan-500/20 rounded-xl border border-blue-400/30">
                            <div className="text-3xl font-bold text-blue-300">
                              {((finalGrade / 20) * 100).toFixed(1)}%
                            </div>
                            <div className="text-blue-200 text-sm font-medium">Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ©</div>
                          </div>
                          <div className="p-4 bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-xl border border-purple-400/30">
                            <div className="text-3xl font-bold text-purple-300">{(20 - finalGrade).toFixed(2)}</div>
                            <div className="text-purple-200 text-sm font-medium">Ù†Ù‚Ø§Ø· Ù„Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©</div>
                          </div>
                          <div className="p-4 bg-gradient-to-br from-green-500/20 to-teal-500/20 rounded-xl border border-green-400/30">
                            <div className="text-3xl font-bold text-green-300">
                              {finalGrade >= 10 ? "Ù†Ø§Ø¬Ø­" : "Ø±Ø§Ø³Ø¨"}
                            </div>
                            <div className="text-green-200 text-sm font-medium">Ø§Ù„Ø­Ø§Ù„Ø©</div>
                          </div>
                        </div>
                      </div>

                      {/* Ø±Ø³Ø§Ù„Ø© ØªØ­ÙÙŠØ²ÙŠØ© */}
                      <div className="relative">
                        <div className="absolute inset-0 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 rounded-xl blur-sm"></div>
                        <div className="relative p-6 bg-gradient-to-r from-slate-800/80 to-slate-900/80 backdrop-blur-lg rounded-xl border border-yellow-400/30 shadow-xl">
                          <div className="text-2xl font-bold text-yellow-300 mb-2">
                            {finalGrade >= 16
                              ? "ğŸŒŸ Ø£Ø¯Ø§Ø¡ Ù…Ù…ØªØ§Ø²! Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„ØªÙÙˆÙ‚!"
                              : finalGrade >= 14
                                ? "ğŸ¯ Ø£Ø¯Ø§Ø¡ Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹! Ù‚Ø±ÙŠØ¨ Ù…Ù† Ø§Ù„ØªÙ…ÙŠØ²!"
                                : finalGrade >= 12
                                  ? "ğŸ“ˆ Ø£Ø¯Ø§Ø¡ Ø¬ÙŠØ¯! ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ø³ÙŠÙ†Ù‡ Ø£ÙƒØ«Ø±!"
                                  : finalGrade >= 10
                                    ? "ğŸ’ª Ù†Ø¬Ø­Øª! Ø±ÙƒØ² Ø¹Ù„Ù‰ Ø§Ù„ØªØ­Ø³ÙŠÙ†!"
                                    : "ğŸ”¥ Ù„Ø§ ØªÙŠØ£Ø³! ÙƒÙ„ Ø¨Ø¯Ø§ÙŠØ© ØµØ¹Ø¨Ø©!"}
                          </div>
                          <div className="text-white/80 text-lg">
                            {finalGrade >= 16
                              ? "Ù…Ø¹Ø¯Ù„Ùƒ Ù…Ù…ØªØ§Ø² ÙˆÙŠÙØªØ­ Ù„Ùƒ Ø£Ø¨ÙˆØ§Ø¨ Ø£ÙØ¶Ù„ Ø§Ù„Ø¬Ø§Ù…Ø¹Ø§Øª!"
                              : finalGrade >= 14
                                ? "Ù…Ø¹Ø¯Ù„ Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹ØŒ Ø¨ØªØ­Ø³ÙŠÙ† Ø¨Ø³ÙŠØ· Ø³ØªØµÙ„ Ù„Ù„ØªÙ…ÙŠØ²!"
                                : finalGrade >= 12
                                  ? "Ù…Ø¹Ø¯Ù„ Ø¬ÙŠØ¯ØŒ Ø±ÙƒØ² Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¶Ø¹ÙŠÙØ© Ù„ØªØ­Ø³ÙŠÙ† Ø£ÙƒØ¨Ø±!"
                                  : finalGrade >= 10
                                    ? "ØªÙ‡Ø§Ù†ÙŠÙ†Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¬Ø§Ø­! Ø§Ù„Ø¢Ù† Ø±ÙƒØ² Ø¹Ù„Ù‰ Ø±ÙØ¹ Ø§Ù„Ù…Ø¹Ø¯Ù„!"
                                    : "Ù„Ø§ ØªØ³ØªØ³Ù„Ù…! Ø±Ø§Ø¬Ø¹ Ø®Ø·Ø© Ø§Ù„Ø¯Ø±Ø§Ø³Ø© ÙˆØ§Ø¨Ø¯Ø£ Ù…Ù† Ø¬Ø¯ÙŠØ¯!"}
                          </div>
                        </div>
                      </div>
                    </CardContent>
                  </Card>
                </div>
              </TabsContent>

              <TabsContent value="analysis">
                <div className="grid md:grid-cols-2 gap-6">
                  <Card className="border-0 bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl hover-lift">
                    <CardHeader>
                      <CardTitle className="flex items-center gap-3 text-red-400">
                        <AlertCircle className="h-6 w-6" />
                        Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØªÙŠ ØªØ­ØªØ§Ø¬ ØªØ­Ø³ÙŠÙ†
                      </CardTitle>
                    </CardHeader>
                    <CardContent>
                      {analysis?.weakSubjects.length > 0 ? (
                        <div className="space-y-3">
                          {analysis.weakSubjects.map((subject: Subject, index: number) => (
                            <div
                              key={index}
                              className="flex justify-between items-center p-4 bg-red-500/20 rounded-lg border border-red-400/30 hover:bg-red-500/30 transition-all duration-300"
                            >
                              <span className="text-white font-medium">{subject.name}</span>
                              <Badge className="bg-green-500 text-white shadow-lg">{subject.grade}</Badge>
                            </div>
                          ))}
                        </div>
                      ) : (
                        <div className="text-center text-gray-400 py-8">
                          <Star className="h-16 w-16 mx-auto mb-4 opacity-50" />
                          <p className="text-xl">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙˆØ§Ø¯ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØªØ­Ø³ÙŠÙ† Ø­Ø§Ù„ÙŠØ§Ù‹</p>
                        </div>
                      )}
                    </CardContent>
                  </Card>

                  <Card className="border-0 bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl hover-lift">
                    <CardHeader>
                      <CardTitle className="flex items-center gap-3 text-green-400">
                        <Trophy className="h-6 w-6" />
                        Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…ØªÙ…ÙŠØ²Ø©
                      </CardTitle>
                    </CardHeader>
                    <CardContent>
                      {analysis?.strongSubjects.length > 0 ? (
                        <div className="space-y-3">
                          {analysis.strongSubjects.map((subject: Subject, index: number) => (
                            <div
                              key={index}
                              className="flex justify-between items-center p-4 bg-green-500/20 rounded-lg border border-green-400/30 hover:bg-green-500/30 transition-all duration-300"
                            >
                              <span className="text-white font-medium">{subject.name}</span>
                              <Badge className="bg-green-500 text-white shadow-lg">{subject.grade}</Badge>
                            </div>
                          ))}
                        </div>
                      ) : (
                        <div className="text-center text-gray-400 py-8">
                          <Star className="h-16 w-16 mx-auto mb-4 opacity-50" />
                          <p className="text-xl">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙˆØ§Ø¯ Ù…ØªÙ…ÙŠØ²Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</p>
                        </div>
                      )}
                    </CardContent>
                  </Card>

                  <Card className="md:col-span-2 border-0 bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl hover-lift">
                    <CardHeader>
                      <CardTitle className="flex items-center gap-3 text-white">
                        <div className="p-2 bg-blue-500/20 rounded-lg">
                          <TrendingUp className="h-6 w-6 text-blue-400" />
                        </div>
                        ØªÙˆØµÙŠØ§Øª Ù„Ù„ØªØ­Ø³ÙŠÙ†
                      </CardTitle>
                    </CardHeader>
                    <CardContent>
                      <div className="space-y-6">
                        {analysis?.improvementNeeded > 0 && (
                          <Alert className="bg-blue-500/20 border-blue-400/30 rounded-xl">
                            <Info className="h-5 w-5 text-blue-400" />
                            <AlertDescription className="text-white text-lg">
                              ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØªØ­Ø³ÙŠÙ† Ù…Ø¹Ø¯Ù„Ùƒ Ø¨Ù€ {analysis.improvementNeeded.toFixed(2)} Ù†Ù‚Ø·Ø© Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù…Ø¹Ø¯Ù„
                              Ù…Ù…ØªØ§Ø² (16)
                            </AlertDescription>
                          </Alert>
                        )}

                        <div className="grid md:grid-cols-2 gap-6">
                          <div className="p-6 bg-blue-500/20 rounded-xl border border-blue-400/30 hover:bg-blue-500/30 transition-all duration-300">
                            <h4 className="font-bold mb-4 text-blue-300 text-lg flex items-center gap-2">
                              <Target className="h-5 w-5" />
                              Ù†ØµØ§Ø¦Ø­ Ø¹Ø§Ù…Ø©:
                            </h4>
                            <ul className="text-white/80 space-y-3 text-base">
                              <li className="flex items-center gap-2">
                                <div className="w-2 h-2 bg-blue-400 rounded-full"></div>
                                Ø±ÙƒØ² Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø°Ø§Øª Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ø¹Ø§Ù„ÙŠØ©
                              </li>
                              <li className="flex items-center gap-2">
                                <div className="w-2 h-2 bg-blue-400 rounded-full"></div>
                                Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¶Ø¹ÙŠÙØ© Ø¨Ø§Ù†ØªØ¸Ø§Ù…
                              </li>
                              <li className="flex items-center gap-2">
                                <div className="w-2 h-2 bg-blue-400 rounded-full"></div>
                                Ø§Ø³ØªØ®Ø¯Ù… ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ø§Ù„ÙØ¹Ø§Ù„Ø©
                              </li>
                            </ul>
                          </div>

                          <div className="p-6 bg-purple-500/20 rounded-xl border border-purple-400/30 hover:bg-purple-500/30 transition-all duration-300">
                            <h4 className="font-bold mb-4 text-purple-300 text-lg flex items-center gap-2">
                              <Brain className="h-5 w-5" />
                              Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„ØªØ­Ø³ÙŠÙ†:
                            </h4>
                            <ul className="text-white/80 space-y-3 text-base">
                              <li className="flex items-center gap-2">
                                <div className="w-2 h-2 bg-purple-400 rounded-full"></div>
                                Ø­Ø¯Ø¯ Ø£Ù‡Ø¯Ø§ÙØ§Ù‹ ÙˆØ§Ù‚Ø¹ÙŠØ© Ù„ÙƒÙ„ Ù…Ø§Ø¯Ø©
                              </li>
                              <li className="flex items-center gap-2">
                                <div className="w-2 h-2 bg-purple-400 rounded-full"></div>
                                Ø§Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ù…Ù† Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†
                              </li>
                              <li className="flex items-center gap-2">
                                <div className="w-2 h-2 bg-purple-400 rounded-full"></div>
                                Ø´Ø§Ø±Ùƒ ÙÙŠ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø©
                              </li>
                            </ul>
                          </div>
                        </div>
                      </div>
                    </CardContent>
                  </Card>
                </div>
              </TabsContent>

              <TabsContent value="prediction">
                <div className="space-y-6">
                  {/* Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ */}
                  {predictiveScenarios && (
                    <Card className="border-0 bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl hover-lift">
                      <CardHeader>
                        <CardTitle className="flex items-center gap-3 text-white text-2xl">
                          <div className="p-2 bg-blue-500/20 rounded-lg">
                            <Target className="h-7 w-7 text-blue-400" />
                          </div>
                          Ø§Ø®ØªØ± Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø§Ù„ØªÙ†Ø¨Ø¤
                        </CardTitle>
                      </CardHeader>
                      <CardContent>
                        <div className="grid md:grid-cols-4 gap-4 mb-6">
                          {Object.entries(predictiveScenarios)
                            .filter(
                              ([key]) => key !== "subjectImpact" && key !== "timeAnalysis" && key !== "currentStats",
                            )
                            .map(([key, scenario]: [string, any]) => (
                              <button
                                key={key}
                                onClick={() => setSelectedScenario(key)}
                                className={`p-4 rounded-xl border-2 transition-all duration-300 ${
                                  selectedScenario === key
                                    ? "border-blue-400 bg-blue-500/20 scale-105"
                                    : "border-white/20 bg-white/5 hover:bg-white/10"
                                }`}
                              >
                                <div className="text-center space-y-2">
                                  <div className="text-2xl">
                                    {key === "conservative" && "ğŸŒ"}
                                    {key === "realistic" && "ğŸ¯"}
                                    {key === "optimistic" && "ğŸš€"}
                                    {key === "ideal" && "â­"}
                                  </div>
                                  <h3 className="font-bold text-white">
                                    {key === "conservative" && "Ù…ØªØ­ÙØ¸"}
                                    {key === "realistic" && "ÙˆØ§Ù‚Ø¹ÙŠ"}
                                    {key === "optimistic" && "Ù…ØªÙØ§Ø¦Ù„"}
                                    {key === "ideal" && "Ù…Ø«Ø§Ù„ÙŠ"}
                                  </h3>
                                  <div className="text-sm text-gray-300">
                                    <div>Ø§Ù„Ù…Ø¹Ø¯Ù„: {scenario.grade.toFixed(2)}</div>
                                    <div>Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ©: {scenario.probability}%</div>
                                  </div>
                                </div>
                              </button>
                            ))}
                        </div>

                        {/* Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø§Ù„Ù…Ø®ØªØ§Ø± */}
                        {predictiveScenarios[selectedScenario] && (
                          <div className="p-6 bg-gradient-to-r from-blue-500/20 to-purple-500/20 rounded-xl border border-blue-400/30">
                            <div className="grid md:grid-cols-2 gap-6">
                              <div className="space-y-4">
                                <h4 className="text-xl font-bold text-blue-300">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ</h4>
                                <div className="space-y-3">
                                  <div className="flex justify-between items-center">
                                    <span className="text-white/80">Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹:</span>
                                    <span className="font-bold text-blue-300 text-xl">
                                      {predictiveScenarios[selectedScenario].grade.toFixed(2)}
                                    </span>
                                  </div>
                                  <div className="flex justify-between items-center">
                                    <span className="text-white/80">Ø§Ù„ØªØ­Ø³Ù† Ø§Ù„Ù…ØªÙˆÙ‚Ø¹:</span>
                                    <span className="font-bold text-green-300">
                                      +{predictiveScenarios[selectedScenario].improvement.toFixed(2)}
                                    </span>
                                  </div>
                                  <div className="flex justify-between items-center">
                                    <span className="text-white/80">Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ© Ø§Ù„Ù†Ø¬Ø§Ø­:</span>
                                    <span className="font-bold text-yellow-300">
                                      {predictiveScenarios[selectedScenario].probability}%
                                    </span>
                                  </div>
                                  <div className="flex justify-between items-center">
                                    <span className="text-white/80">Ø§Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ø²Ù…Ù†ÙŠ:</span>
                                    <span className="font-bold text-purple-300">
                                      {predictiveScenarios[selectedScenario].timeframe}
                                    </span>
                                  </div>
                                  <div className="flex justify-between items-center">
                                    <span className="text-white/80">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¬Ù‡Ø¯:</span>
                                    <span className="font-bold text-orange-300">
                                      {predictiveScenarios[selectedScenario].effort}
                                    </span>
                                  </div>
                                </div>
                              </div>
                              <div className="space-y-4">
                                <h4 className="text-xl font-bold text-purple-300">Ø§Ù„ÙˆØµÙ</h4>
                                <p className="text-white/80 text-lg leading-relaxed">
                                  {predictiveScenarios[selectedScenario].description}
                                </p>
                                <div className="mt-4">
                                  <Progress
                                    value={predictiveScenarios[selectedScenario].probability}
                                    className="h-3 bg-white/20"
                                  />
                                  <div className="text-center text-sm text-white/60 mt-2">
                                    Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ© ØªØ­Ù‚ÙŠÙ‚ Ù‡Ø°Ø§ Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        )}
                      </CardContent>
                    </Card>
                  )}

                  {/* ØªØ­Ù„ÙŠÙ„ ØªØ£Ø«ÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø¯ */}
                  {predictiveScenarios?.subjectImpact && (
                    <Card className="border-0 bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl hover-lift">
                      <CardHeader>
                        <CardTitle className="flex items-center gap-3 text-white text-2xl">
                          <div className="p-2 bg-green-500/20 rounded-lg">
                            <TrendingUp className="h-7 w-7 text-green-400" />
                          </div>
                          ØªØ­Ù„ÙŠÙ„ ØªØ£Ø«ÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø¯
                        </CardTitle>
                      </CardHeader>
                      <CardContent>
                        <div className="space-y-4">
                          <div className="text-white/80 mb-4">
                            Ø§Ù„Ù…ÙˆØ§Ø¯ Ù…Ø±ØªØ¨Ø© Ø­Ø³Ø¨ ØªØ£Ø«ÙŠØ±Ù‡Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¹Ø§Ù… (Ø§Ù„Ø£ÙƒØ«Ø± ØªØ£Ø«ÙŠØ±Ø§Ù‹ Ø£ÙˆÙ„Ø§Ù‹):
                          </div>
                          <div className="grid gap-3">
                            {predictiveScenarios.subjectImpact.slice(0, 8).map((subject: any, index: number) => (
                              <div
                                key={index}
                                className="p-4 bg-gradient-to-r from-green-500/20 to-blue-500/20 rounded-lg border border-green-400/30"
                              >
                                <div className="flex justify-between items-center mb-2">
                                  <div className="flex items-center gap-3">
                                    <div className="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white font-bold text-sm">
                                      {index + 1}
                                    </div>
                                    <span className="font-medium text-white">{subject.subject}</span>
                                  </div>
                                  <div className="flex items-center gap-2">
                                    <Badge className="bg-blue-500 text-white">Ù…Ø¹Ø§Ù…Ù„ {subject.coefficient}</Badge>
                                    <Badge className="bg-yellow-500 text-white">Ø­Ø§Ù„ÙŠØ§Ù‹: {subject.currentGrade}</Badge>
                                  </div>
                                </div>
                                <div className="grid grid-cols-3 gap-4 text-sm">
                                  <div className="text-center p-2 bg-white/10 rounded">
                                    <div className="text-white/60">ØªØ£Ø«ÙŠØ± +1 Ù†Ù‚Ø·Ø©</div>
                                    <div className="font-bold text-green-300">
                                      +{subject.impactPer1Point.toFixed(3)}
                                    </div>
                                  </div>
                                  <div className="text-center p-2 bg-white/10 rounded">
                                    <div className="text-white/60">ØªØ£Ø«ÙŠØ± +2 Ù†Ù‚Ø·Ø©</div>
                                    <div className="font-bold text-blue-300">
                                      +{subject.impactPer2Points.toFixed(3)}
                                    </div>
                                  </div>
                                  <div className="text-center p-2 bg-white/10 rounded">
                                    <div className="text-white/60">ØªØ£Ø«ÙŠØ± +3 Ù†Ù‚Ø§Ø·</div>
                                    <div className="font-bold text-purple-300">
                                      +{subject.impactPer3Points.toFixed(3)}
                                    </div>
                                  </div>
                                </div>
                                <div className="mt-2 text-xs text-white/60">
                                  Ù…Ø¤Ø´Ø± Ø§Ù„ÙƒÙØ§Ø¡Ø©: {subject.efficiency.toFixed(2)} | Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:{" "}
                                  {subject.priority.toFixed(2)}
                                </div>
                              </div>
                            ))}
                          </div>
                        </div>
                      </CardContent>
                    </Card>
                  )}

                  {/* Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ */}
                  {predictiveScenarios?.timeAnalysis && (
                    <Card className="border-0 bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl hover-lift">
                      <CardHeader>
                        <CardTitle className="flex items-center gap-3 text-white text-2xl">
                          <div className="p-2 bg-orange-500/20 rounded-lg">
                            <Clock className="h-7 w-7 text-orange-400" />
                          </div>
                          Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ Ù„Ù„Ø£Ù‡Ø¯Ø§Ù
                        </CardTitle>
                      </CardHeader>
                      <CardContent>
                        <div className="grid md:grid-cols-3 gap-6">
                          <div className="p-6 bg-gradient-to-br from-yellow-500/20 to-orange-500/20 rounded-xl border border-yellow-400/30 text-center">
                            <div className="text-4xl mb-4">ğŸ¯</div>
                            <h4 className="text-xl font-bold text-yellow-300 mb-2">Ù…Ø¹Ø¯Ù„ Ø­Ø³Ù† (14)</h4>
                            <div className="text-2xl font-bold text-white mb-2">
                              {predictiveScenarios.timeAnalysis.toReach14}
                            </div>
                            <div className="text-sm text-yellow-200">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ù„Ù„ÙˆØµÙˆÙ„</div>
                          </div>
                          <div className="p-6 bg-gradient-to-br from-green-500/20 to-blue-500/20 rounded-xl border border-green-400/30 text-center">
                            <div className="text-4xl mb-4">ğŸ†</div>
                            <h4 className="text-xl font-bold text-green-300 mb-2">Ù…Ø¹Ø¯Ù„ Ù…Ù…ØªØ§Ø² (16)</h4>
                            <div className="text-2xl font-bold text-white mb-2">
                              {predictiveScenarios.timeAnalysis.toReach16}
                            </div>
                            <div className="text-sm text-green-200">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ù„Ù„ÙˆØµÙˆÙ„</div>
                          </div>
                          <div className="p-6 bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-xl border border-purple-400/30 text-center">
                            <div className="text-4xl mb-4">â­</div>
                            <h4 className="text-xl font-bold text-purple-300 mb-2">Ù…Ø¹Ø¯Ù„ Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠ (18)</h4>
                            <div className="text-2xl font-bold text-white mb-2">
                              {predictiveScenarios.timeAnalysis.toReach18}
                            </div>
                            <div className="text-sm text-purple-200">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ù„Ù„ÙˆØµÙˆÙ„</div>
                          </div>
                        </div>
                      </CardContent>
                    </Card>
                  )}

                  {/* Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø­Ø§Ù„ÙŠ */}
                  {predictiveScenarios?.currentStats && (
                    <Card className="border-0 bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl hover-lift">
                      <CardHeader>
                        <CardTitle className="flex items-center gap-3 text-white text-2xl">
                          <div className="p-2 bg-cyan-500/20 rounded-lg">
                            <Award className="h-7 w-7 text-cyan-400" />
                          </div>
                          Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø­Ø§Ù„ÙŠ
                        </CardTitle>
                      </CardHeader>
                      <CardContent>
                        <div className="grid md:grid-cols-4 gap-6">
                          <div className="p-6 bg-gradient-to-br from-red-500/20 to-pink-500/20 rounded-xl border border-red-400/30 text-center">
                            <div className="text-4xl mb-4">ğŸ“š</div>
                            <h4 className="text-xl font-bold text-red-300 mb-2">Ù…ÙˆØ§Ø¯ Ø¶Ø¹ÙŠÙØ©</h4>
                            <div className="text-3xl font-bold text-white mb-2">
                              {predictiveScenarios.currentStats.weakSubjects}
                            </div>
                            <div className="text-sm text-red-200">ØªØ­ØªØ§Ø¬ ØªØ­Ø³ÙŠÙ†</div>
                          </div>
                          <div className="p-6 bg-gradient-to-br from-yellow-500/20 to-orange-500/20 rounded-xl border border-yellow-400/30 text-center">
                            <div className="text-4xl mb-4">ğŸ“–</div>
                            <h4 className="text-xl font-bold text-yellow-300 mb-2">Ù…ÙˆØ§Ø¯ Ù…ØªÙˆØ³Ø·Ø©</h4>
                            <div className="text-3xl font-bold text-white mb-2">
                              {predictiveScenarios.currentStats.averageSubjects}
                            </div>
                            <div className="text-sm text-yellow-200">Ù…Ø³ØªÙˆÙ‰ Ø¬ÙŠØ¯</div>
                          </div>
                          <div className="p-6 bg-gradient-to-br from-green-500/20 to-teal-500/20 rounded-xl border border-green-400/30 text-center">
                            <div className="text-4xl mb-4">ğŸ†</div>
                            <h4 className="text-xl font-bold text-green-300 mb-2">Ù…ÙˆØ§Ø¯ Ù‚ÙˆÙŠØ©</h4>
                            <div className="text-3xl font-bold text-white mb-2">
                              {predictiveScenarios.currentStats.strongSubjects}
                            </div>
                            <div className="text-sm text-green-200">Ù…Ø³ØªÙˆÙ‰ Ù…Ù…ØªØ§Ø²</div>
                          </div>
                          <div className="p-6 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-xl border border-blue-400/30 text-center">
                            <div className="text-4xl mb-4">ğŸ“Š</div>
                            <h4 className="text-xl font-bold text-blue-300 mb-2">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙˆØ§Ø¯</h4>
                            <div className="text-3xl font-bold text-white mb-2">
                              {predictiveScenarios.currentStats.totalSubjects}
                            </div>
                            <div className="text-sm text-blue-200">Ù…Ø§Ø¯Ø© Ø¯Ø±Ø§Ø³ÙŠØ©</div>
                          </div>
                        </div>
                      </CardContent>
                    </Card>
                  )}
                </div>
              </TabsContent>

              <TabsContent value="universities">
                <div className="space-y-6">
                  {analysis?.eligibleUniversities && analysis.eligibleUniversities.length > 0 && (
                    <Card className="border-0 bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl hover-lift">
                      <CardHeader>
                        <CardTitle className="flex items-center gap-3 text-green-400">
                          <CheckCircle className="h-6 w-6" />
                          Ø§Ù„Ø¬Ø§Ù…Ø¹Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© Ù„Ùƒ
                        </CardTitle>
                      </CardHeader>
                      <CardContent>
                        <div className="grid md:grid-cols-2 gap-4">
                          {analysis.eligibleUniversities.map((university: UniversityRequirement, index: number) => (
                            <div
                              key={index}
                              className="p-4 bg-green-500/20 rounded-lg border border-green-400/30 hover:bg-green-500/30 transition-all duration-300"
                            >
                              <div className="flex justify-between items-start mb-2">
                                <h4 className="font-bold text-white text-lg">{university.name}</h4>
                                <Badge className="bg-green-500 text-white">Ù…ØªØ§Ø­</Badge>
                              </div>
                              <div className="space-y-2 text-sm">
                                <div className="flex justify-between">
                                  <span className="text-white/80">Ø§Ù„Ø¹ØªØ¨Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:</span>
                                  <span className="text-green-300 font-bold">{university.minGrade}</span>
                                </div>
                                <div className="flex justify-between">
                                  <span className="text-white/80">Ù…Ø¹Ø¯Ù„Ùƒ:</span>
                                  <span className="text-blue-300 font-bold">{finalGrade?.toFixed(2)}</span>
                                </div>
                                <div className="flex justify-between">
                                  <span className="text-white/80">Ø§Ù„ÙØ¦Ø©:</span>
                                  <span className="text-purple-300">{university.category}</span>
                                </div>
                              </div>
                            </div>
                          ))}
                        </div>
                      </CardContent>
                    </Card>
                  )}

                  {analysis?.potentialUniversities && analysis.potentialUniversities.length > 0 && (
                    <Card className="border-0 bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl hover-lift">
                      <CardHeader>
                        <CardTitle className="flex items-center gap-3 text-yellow-400">
                          <Target className="h-6 w-6" />
                          Ø¬Ø§Ù…Ø¹Ø§Øª ÙŠÙ…ÙƒÙ† Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„ÙŠÙ‡Ø§ Ø¨ØªØ­Ø³ÙŠÙ† Ø¨Ø³ÙŠØ·
                        </CardTitle>
                      </CardHeader>
                      <CardContent>
                        <div className="grid md:grid-cols-2 gap-4">
                          {analysis.potentialUniversities.map((university: UniversityRequirement, index: number) => (
                            <div
                              key={index}
                              className="p-4 bg-yellow-500/20 rounded-lg border border-yellow-400/30 hover:bg-yellow-500/30 transition-all duration-300"
                            >
                              <div className="flex justify-between items-start mb-2">
                                <h4 className="font-bold text-white text-lg">{university.name}</h4>
                                <Badge className="bg-yellow-500 text-white">Ù‚Ø±ÙŠØ¨</Badge>
                              </div>
                              <div className="space-y-2 text-sm">
                                <div className="flex justify-between">
                                  <span className="text-white/80">Ø§Ù„Ø¹ØªØ¨Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:</span>
                                  <span className="text-yellow-300 font-bold">{university.minGrade}</span>
                                </div>
                                <div className="flex justify-between">
                                  <span className="text-white/80">Ù…Ø¹Ø¯Ù„Ùƒ:</span>
                                  <span className="text-blue-300 font-bold">{finalGrade?.toFixed(2)}</span>
                                </div>
                                <div className="flex justify-between">
                                  <span className="text-white/80">Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:</span>
                                  <span className="text-red-300 font-bold">
                                    +{(university.minGrade - (finalGrade || 0)).toFixed(2)}
                                  </span>
                                </div>
                                <div className="flex justify-between">
                                  <span className="text-white/80">Ø§Ù„ÙØ¦Ø©:</span>
                                  <span className="text-purple-300">{university.category}</span>
                                </div>
                              </div>
                            </div>
                          ))}
                        </div>
                      </CardContent>
                    </Card>
                  )}

                  {(!analysis?.eligibleUniversities || analysis.eligibleUniversities.length === 0) &&
                    (!analysis?.potentialUniversities || analysis.potentialUniversities.length === 0) && (
                      <Card className="border-0 bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl">
                        <CardContent className="text-center py-12">
                          <GraduationCap className="h-16 w-16 mx-auto mb-4 text-gray-400 opacity-50" />
                          <h3 className="text-xl font-bold text-white mb-2">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¬Ø§Ù…Ø¹Ø§Øª Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</h3>
                          <p className="text-gray-400">Ù‚Ù… Ø¨ØªØ­Ø³ÙŠÙ† Ù…Ø¹Ø¯Ù„Ùƒ Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø¬Ø§Ù…Ø¹Ø§Øª Ø§Ù„Ù…Ø±ØºÙˆØ¨Ø©</p>
                        </CardContent>
                      </Card>
                    )}
                </div>
              </TabsContent>

              <TabsContent value="strategy">
                <div className="space-y-6">
                  {/* Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ù†Ø³Ø¨ÙŠ Ø§Ù„Ù…Ø­Ø³Ù† */}
                  {finalGrade !== null && (
                    <>
                      {(() => {
                        const studyPlan = getAdaptiveStudyPlan(finalGrade)
                        return (
                          <Card
                            className={`border-0 bg-gradient-to-br ${studyPlan.color} backdrop-blur-xl hover-lift border ${studyPlan.borderColor}`}
                          >
                            <CardHeader>
                              <CardTitle className="flex items-center gap-3 text-white text-2xl">
                                <div className="p-2 bg-indigo-500/20 rounded-lg">
                                  <Brain className="h-7 w-7 text-indigo-400" />
                                </div>
                                {studyPlan.level}
                              </CardTitle>
                            </CardHeader>
                            <CardContent>
                              <div className="grid md:grid-cols-2 gap-6">
                                {/* Ø§Ù„Ø®Ø·Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ© */}
                                <div className="p-6 bg-white/10 rounded-xl border border-white/20">
                                  <h3 className="text-xl font-bold text-white mb-4 flex items-center gap-2">
                                    <Clock className="h-5 w-5" />
                                    Ø§Ù„Ø®Ø·Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ©
                                  </h3>
                                  <div className="space-y-3">
                                    {studyPlan.daily.map((item, index) => (
                                      <div key={index} className="flex items-start gap-3 p-3 bg-white/10 rounded-lg">
                                        <div
                                          className={`w-3 h-3 rounded-full mt-1 ${
                                            item.priority === "Ø¹Ø§Ù„ÙŠ"
                                              ? "bg-red-400"
                                              : item.priority === "Ù…ØªÙˆØ³Ø·"
                                                ? "bg-yellow-400"
                                                : item.priority === "Ù…Ù†Ø®ÙØ¶"
                                                  ? "bg-green-400"
                                                  : item.priority === "Ø¹Ø§Ù„ÙŠ Ø¬Ø¯Ø§Ù‹"
                                                    ? "bg-purple-400"
                                                    : item.priority === "Ø­Ø±Ø¬"
                                                      ? "bg-pink-400"
                                                      : "bg-blue-400"
                                          }`}
                                        ></div>
                                        <div className="flex-1">
                                          <div className="text-white font-medium">{item.time}</div>
                                          <div className="text-white/80 text-sm">{item.activity}</div>
                                          <Badge
                                            className={`mt-1 text-xs ${
                                              item.priority === "Ø¹Ø§Ù„ÙŠ"
                                                ? "bg-red-500"
                                                : item.priority === "Ù…ØªÙˆØ³Ø·"
                                                  ? "bg-yellow-500"
                                                  : item.priority === "Ù…Ù†Ø®ÙØ¶"
                                                    ? "bg-green-500"
                                                    : item.priority === "Ø¹Ø§Ù„ÙŠ Ø¬Ø¯Ø§Ù‹"
                                                      ? "bg-purple-500"
                                                      : item.priority === "Ø­Ø±Ø¬"
                                                        ? "bg-pink-500"
                                                        : "bg-blue-500"
                                            } text-white`}
                                          >
                                            {item.priority}
                                          </Badge>
                                        </div>
                                      </div>
                                    ))}
                                  </div>
                                </div>

                                {/* Ø§Ù„Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ù…Ø®ØµØµØ© */}
                                <div className="p-6 bg-white/10 rounded-xl border border-white/20">
                                  <h3 className="text-xl font-bold text-white mb-4 flex items-center gap-2">
                                    <Target className="h-5 w-5" />
                                    Ù†ØµØ§Ø¦Ø­ Ù…Ø®ØµØµØ©
                                  </h3>
                                  <ul className="text-white/80 space-y-3 text-base">
                                    {studyPlan.tips.map((tip, index) => (
                                      <li key={index} className="flex items-center gap-2">
                                        <div className="w-2 h-2 bg-blue-400 rounded-full"></div>
                                        {tip}
                                      </li>
                                    ))}
                                  </ul>
                                </div>
                              </div>
                            </CardContent>
                          </Card>
                        )
                      })()}
                    </>
                  )}
                </div>
              </TabsContent>

              <TabsContent value="pdf">
                <Card className="border-0 bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl hover-lift">
                  <CardHeader>
                    <CardTitle className="flex items-center gap-3 text-white text-2xl">
                      <div className="p-2 bg-teal-500/20 rounded-lg">
                        <FileText className="h-7 w-7 text-teal-400" />
                      </div>
                      ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†ØªÙŠØ¬Ø© PDF
                    </CardTitle>
                  </CardHeader>
                  <CardContent className="text-center">
                    <p className="text-white/80 mb-6">
                      ÙŠÙ…ÙƒÙ†Ùƒ Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„ ÙÙŠ Ù…Ù„Ù PDF Ø§Ø­ØªØ±Ø§ÙÙŠ Ù„Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„ÙŠÙ‡ Ù„Ø§Ø­Ù‚Ø§Ù‹.
                    </p>
                    <Button
                      onClick={() => downloadPDF(finalGrade, subjects, analysis)}
                      className="mx-auto h-12 px-10 text-lg font-bold bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 transition-all duration-300"
                    >
                      <Download className="h-5 w-5 mr-2" />
                      ØªØ­Ù…ÙŠÙ„ PDF
                    </Button>
                  </CardContent>
                </Card>
              </TabsContent>
            </Tabs>
          </div>
        )}
      </div>
    </div>
  )
}
